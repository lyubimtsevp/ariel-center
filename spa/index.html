<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hello world project</title>
    <script>
    /* Скрыть все скроллбары на странице новостей */
    (function() {
      const style = document.createElement('style');
      style.textContent = `
        .hide-scrollbar::-webkit-scrollbar,
        [data-news-loaded]::-webkit-scrollbar,
        [data-news-loaded] *::-webkit-scrollbar {
          display: none !important;
          width: 0 !important;
          height: 0 !important;
        }
        .hide-scrollbar,
        [data-news-loaded],
        [data-news-loaded] * {
          scrollbar-width: none !important;
          -ms-overflow-style: none !important;
        }
      `;
      document.head.appendChild(style);
    })();
</script>
    <script type="module" crossorigin src="/assets/index-z-l6LwOm2.js?v=111"></script>
    <link rel="stylesheet" crossorigin href="/assets/index-BEzxNODc.css">
    <script>
    // Заменить левое меню на страницах /cabinet и /cabinet/news
    (function() {
      function replaceMenu() {
        const path = window.location.pathname;
        const hash = window.location.hash;

        // Проверить что это главная страница /cabinet или /cabinet/news или /cabinet/profile или /cabinet/support
        const isMainCabinet = (path === '/cabinet' || path === '/cabinet/') && (!hash || hash === '' || hash === '#' || hash === '#/');
        const isNewsPage = path === '/cabinet/news' || path === '/cabinet/news/';
        const isProfilePage = path === '/cabinet/profile' || path === '/cabinet/profile/';
        const isSupportPage = path === '/cabinet/support' || path === '/cabinet/support/';
        const isInfoPage = path === '/cabinet/info' || path === '/cabinet/info/';
        const isPhotoPage = path === '/cabinet/photo' || path === '/cabinet/photo/';
        const isCashbackPage = path === '/cabinet/cashback' || path === '/cabinet/cashback/';
        const isStructurePage = path === '/cabinet/structure' || path === '/cabinet/structure/';
        const isFinancePage = path === '/cabinet/finance' || path === '/cabinet/finance/';

        if (isMainCabinet || isNewsPage || isProfilePage || isSupportPage || isInfoPage || isPhotoPage || isCashbackPage || isStructurePage || isFinancePage) {
          // Проверить, что меню еще не добавлено
          const existingMenu = document.querySelector('[data-custom-menu="main-cabinet"]');
          if (existingMenu) {
            // Обновить стили существующего меню
            existingMenu.style.cssText = 'position: fixed !important; left: 0 !important; top: 60px !important; bottom: 0 !important; z-index: 99999 !important; pointer-events: auto !important; overflow-y: auto !important; overflow-x: hidden !important; flex-shrink: 0 !important; display: flex !important; visibility: visible !important; opacity: 1 !important;';
            return;
          }

          // Удалить старое меню по data-node-id
          const menuById = document.querySelector('[data-node-id="8:289"]');
          if (menuById) {
            menuById.remove();
            console.log('Old menu removed by data-node-id');
          }

          // Удалить все aside элементы
          const asides = document.querySelectorAll('aside');
          asides.forEach(function(aside) {
            if (!aside.hasAttribute('data-custom-menu')) {
              aside.remove();
              console.log('Old aside removed');
            }
          });

          // Удалить старые элементы с иконками меню по классам
          const menuDivs = document.querySelectorAll('div[class*="right-[1371px]"][class*="w-[69px]"][class*="h-[740px]"]');
          menuDivs.forEach(function(div) {
            div.remove();
            console.log('Old menu div removed');
          });

          // Найти контейнер для вставки нового меню
          let targetContainer = document.querySelector('[data-node-id="8:231"]');

          // Если не нашли по data-node-id, попробовать найти по другим селекторам
          if (!targetContainer) {
            const root = document.getElementById('root');
            if (root && root.firstElementChild) {
              targetContainer = root.firstElementChild;
            }
          }

          if (targetContainer && !document.querySelector('[data-custom-menu="main-cabinet"]')) {
            // Определить активный класс для каждой кнопки
            const activeClass = 'bg-[#2a6a9a]';
            const hoverClass = 'hover:bg-[#2a6a9a]';

            const homeActive = isMainCabinet ? activeClass : hoverClass;
            const profileActive = (path === '/cabinet/profile' || path === '/cabinet/profile/') ? activeClass : hoverClass;
            const financeActive = (path === '/cabinet/finance' || path === '/cabinet/finance/') ? activeClass : hoverClass;
            const newsActive = isNewsPage ? activeClass : hoverClass;
            const supportActive = (path === '/cabinet/support' || path === '/cabinet/support/') ? activeClass : hoverClass;
            const infoActive = (path === '/cabinet/info' || path === '/cabinet/info/') ? activeClass : hoverClass;
            const photoActive = (path === '/cabinet/photo' || path === '/cabinet/photo/') ? activeClass : hoverClass;
            const cashbackActive = (path === '/cabinet/cashback' || path === '/cabinet/cashback/') ? activeClass : hoverClass;
            const structureActive = (path === '/cabinet/structure' || path === '/cabinet/structure/') ? activeClass : hoverClass;

            // Создать новое aside меню
            const newAside = document.createElement('aside');
            newAside.className = 'w-[69px] bg-[#1e5885] flex flex-col';
            newAside.setAttribute('data-custom-menu', 'main-cabinet');
            newAside.style.cssText = 'position: fixed !important; left: 0 !important; top: 60px !important; bottom: 0 !important; z-index: 99999 !important; pointer-events: auto !important; overflow-y: auto !important; overflow-x: hidden !important; flex-shrink: 0 !important; display: flex !important; visibility: visible !important; opacity: 1 !important; width: 69px !important;';
            newAside.innerHTML = '<a class="w-[69px] h-[70px] ' + homeActive + ' transition-all flex items-center justify-center" href="/cabinet"><img src="/assets/icon_home-D863mDdT.png" alt="Главная" class="w-[31px] h-[36px] object-cover"></a><a class="w-[69px] h-[77px] ' + profileActive + ' transition-all flex items-center justify-center" href="/cabinet/profile"><img src="/assets/icon_news-C9e8K7EC.png" alt="Новости" class="w-[32px] h-[36px] object-cover"></a><a class="w-[69px] h-[74px] ' + financeActive + ' transition-all flex items-center justify-center" href="/cabinet/finance"><img src="/assets/icon_finance-wGJQG7h4.png" alt="Финансы" class="w-[37px] h-[34px] object-cover"></a><a class="w-[69px] h-[76px] ' + newsActive + ' transition-all flex items-center justify-center" href="/cabinet/news"><img src="/assets/icon_profile-CnXtXZMy.png" alt="Профиль" class="w-[36px] h-[34px] object-cover"></a><a class="w-[69px] h-[74px] ' + supportActive + ' transition-all flex items-center justify-center" href="/cabinet/support"><img src="/assets/icon_support-BqKEWXEa.png" alt="Поддержка" class="w-[30px] h-[36px] object-cover"></a><a class="w-[69px] h-[70px] ' + infoActive + ' transition-all flex items-center justify-center" href="/cabinet/info"><img src="/assets/icon_info-CAzu2RoW.png" alt="Информация" class="w-[36px] h-[36px] object-cover"></a><a class="w-[69px] h-[73px] ' + photoActive + ' transition-all flex items-center justify-center" href="/cabinet/photo"><img src="/assets/icon_photo-Y-EepUgg.png" alt="Фото" class="w-[36px] h-[32px] object-cover"></a><a class="w-[69px] h-[80px] ' + cashbackActive + ' transition-all flex items-center justify-center" href="/cabinet/cashback"><img src="/assets/icon_cashback-Ck05F8HY.png" alt="Кэшбэк" class="w-[36px] h-[36px] object-cover"></a><a class="w-[69px] h-[77px] ' + structureActive + ' transition-all flex items-center justify-center" href="/cabinet/structure"><img src="/assets/icon_structure-D7GgR2ft.png" alt="Структура" class="w-[37px] h-[32px] object-cover"></a><div class="flex-1"></div>';

            // Вставить меню в body для максимального приоритета
            document.body.appendChild(newAside);
            console.log('New custom menu added to body');
          }
        }
      }

      setTimeout(replaceMenu, 10);
      setTimeout(replaceMenu, 50);
      setTimeout(replaceMenu, 100);
      setTimeout(replaceMenu, 200);
      setTimeout(replaceMenu, 500);
      setTimeout(replaceMenu, 1000);
      setTimeout(replaceMenu, 2000);

      const observer = new MutationObserver(replaceMenu);
      if (document.body) {
        observer.observe(document.body, { childList: true, subtree: true });
      }

      setInterval(replaceMenu, 100);
    })();

    // Растянуть главный контейнер на всю высоту и зафиксировать фон
    (function() {
      function stretchContainer() {
        const mainContainer = document.querySelector('#root > div > div');

        if (mainContainer && !mainContainer.hasAttribute('data-stretched')) {
          mainContainer.style.minHeight = '100vh';
          mainContainer.style.height = 'auto';
          mainContainer.style.backgroundAttachment = 'fixed';
          mainContainer.setAttribute('data-stretched', 'true');
          console.log('Container stretched and background fixed');
        }
      }

      setTimeout(stretchContainer, 100);
      setTimeout(stretchContainer, 500);
      setTimeout(stretchContainer, 1000);

      const observer = new MutationObserver(stretchContainer);
      if (document.body) {
        observer.observe(document.body, { childList: true, subtree: true });
      }
    })();

    // Удалить фоновое изображение из DOM
    (function() {
      function removeBgImage() {
        const bgImage = document.querySelector('img[src*="bg_main"]');

        if (bgImage) {
          bgImage.remove();
          console.log('Background image removed from DOM');
        }
      }

      setTimeout(removeBgImage, 100);
      setTimeout(removeBgImage, 500);
      setTimeout(removeBgImage, 1000);

      const observer = new MutationObserver(removeBgImage);
      if (document.body) {
        observer.observe(document.body, { childList: true, subtree: true });
      }
    })();

    // Объединить футер в единый объект
    (function() {
      function unifyFooter() {
        const copyright = document.querySelector('[class*="bottom-"][class*="left-"]');
        const socials = document.querySelector('[class*="bottom-"][class*="right-"]');

        if (!copyright || !socials) return;
        if (document.querySelector('[data-footer-unified]')) return;

        const footerContainer = document.createElement('div');
        footerContainer.setAttribute('data-footer-unified', 'true');
        footerContainer.style.cssText = 'position: fixed; bottom: 0; left: 69px; right: 0; height: 60px; display: flex; align-items: center; justify-content: space-between; padding: 0 30px; background-color: transparent; z-index: 9999;';

        copyright.style.cssText = 'position: static;';
        socials.style.cssText = 'position: static; display: flex; gap: 15px;';

        footerContainer.appendChild(copyright);
        footerContainer.appendChild(socials);
        document.body.appendChild(footerContainer);

        console.log('Footer unified');
      }

      setTimeout(unifyFooter, 100);
      setTimeout(unifyFooter, 500);
      setTimeout(unifyFooter, 1000);

      const observer = new MutationObserver(unifyFooter);
      if (document.body) {
        observer.observe(document.body, { childList: true, subtree: true });
      }
    })();

    // Привязать фон к #root
    (function() {
      function attachBackground() {
        const root = document.getElementById('root');

        if (root && !root.hasAttribute('data-bg-attached')) {
          root.style.backgroundImage = 'url(/assets/bg_main-DQr-V78G.png)';
          root.style.backgroundSize = 'cover';
          root.style.backgroundPosition = 'center';
          root.style.backgroundAttachment = 'fixed';
          root.style.minHeight = '100vh';
          root.setAttribute('data-bg-attached', 'true');
          console.log('Background attached to root');
        }
      }

      setTimeout(attachBackground, 50);
      setTimeout(attachBackground, 200);
    })();

    // Удалить старый copyright текст
    (function() {
      function removeOldCopyright() {
        const copyrightElements = document.querySelectorAll('[class*="bottom-"]');

        copyrightElements.forEach(function(el) {
          if (el.textContent && el.textContent.includes('2019 © О00 Албикс')) {
            el.remove();
            console.log('Old copyright removed');
          }
        });
      }

      setTimeout(removeOldCopyright, 100);
      setTimeout(removeOldCopyright, 500);
      setTimeout(removeOldCopyright, 1000);

      const observer = new MutationObserver(removeOldCopyright);
      if (document.body) {
        observer.observe(document.body, { childList: true, subtree: true });
      }
    })();

    // Переместить контент на страницах /cabinet/news и /cabinet/support
    (function() {
      function moveContent() {
        const path = window.location.pathname;
        const isNewsPage = path === '/cabinet/news' || path === '/cabinet/news/';
        const isSupportPage = path === '/cabinet/support' || path === '/cabinet/support/';
        const isInfoPage = path === '/cabinet/info' || path === '/cabinet/info/';
        const isPhotoPage = path === '/cabinet/photo' || path === '/cabinet/photo/';
        const isCashbackPage = path === '/cabinet/cashback' || path === '/cabinet/cashback/';
        const isStructurePage = path === '/cabinet/structure' || path === '/cabinet/structure/';
        const isFinancePage = path === '/cabinet/finance' || path === '/cabinet/finance/';

        if (!isNewsPage && !isSupportPage && !isInfoPage && !isPhotoPage && !isCashbackPage && !isStructurePage && !isFinancePage) return;

        // Проверить, что контент еще не перемещен
        if (document.querySelector('[data-content-moved="true"]')) {
          return;
        }

        // Найти контентный блок по классу
        const contentBlock = document.querySelector('div.h-full.overflow-y-auto.px-8');
        if (!contentBlock) return;

        // Найти целевой контейнер
        const targetContainer = document.querySelector('.absolute.top-\\[60px\\].left-\\[69px\\]');
        if (!targetContainer) return;

        // Переместить контент
        contentBlock.setAttribute('data-content-moved', 'true');
        targetContainer.appendChild(contentBlock);
        console.log('Content moved to correct container');
      }

      setTimeout(moveContent, 100);
      setTimeout(moveContent, 300);
      setTimeout(moveContent, 600);
      setTimeout(moveContent, 1000);
      setTimeout(moveContent, 2000);

      const observer = new MutationObserver(moveContent);
      if (document.body) {
        observer.observe(document.body, { childList: true, subtree: true });
      }

      setInterval(moveContent, 1000);
    })();

    // Удалить мокап новостей на странице /cabinet/news
    (function() {
      function removeMockNews() {
        const path = window.location.pathname;
        const isNewsPage = path === '/cabinet/news' || path === '/cabinet/news/';

        if (!isNewsPage) return;

        // Найти и удалить блок с мокапом новостей
        const mockBlock = document.querySelector('div.grid.grid-cols-2.pb-8');
        if (mockBlock && !mockBlock.hasAttribute('data-mock-removed')) {
          mockBlock.remove();
          mockBlock.setAttribute('data-mock-removed', 'true');
          console.log('Mock news block removed');
        }

        // Также удалить по другим признакам если первый не сработал
        const hideScrollbarBlocks = document.querySelectorAll('.rounded-lg.hide-scrollbar');
        if (hideScrollbarBlocks.length > 0) {
          // Проверить что это именно мокап - должно быть несколько блоков с одинаковым текстом
          hideScrollbarBlocks.forEach(function(block) {
            const text = block.textContent || '';
            if (text.indexOf('Название новости') !== -1 && text.indexOf('25.04.2019') !== -1) {
              const parent = block.parentElement;
              if (parent && parent.classList.contains('grid')) {
                parent.remove();
                console.log('Mock news grid removed');
              }
            }
          });
        }
      }

      // Запустить удаление несколько раз с задержками
      setTimeout(removeMockNews, 50);
      setTimeout(removeMockNews, 200);
      setTimeout(removeMockNews, 500);
      setTimeout(removeMockNews, 1000);

      // Следить за изменениями DOM
      const observer = new MutationObserver(removeMockNews);
      if (document.body) {
        observer.observe(document.body, { childList: true, subtree: true });
      }
    })();



    // Зафиксировать хедер
    (function() {
      function fixHeader() {
        // Найти хедер - обычно это первый элемент в контейнере или элемент header
        const headers = document.querySelectorAll('header');

        if (headers.length > 0) {
          headers.forEach(function(header) {
            if (!header.hasAttribute('data-header-fixed')) {
              header.style.position = 'fixed';
              header.style.top = '0';
              header.style.left = '0';
              header.style.right = '0';
              header.style.zIndex = '100000';
              header.setAttribute('data-header-fixed', 'true');
              console.log('Header fixed');
            }
          });
        }

        // Также попробовать найти хедер по высоте 60px в верхней части
        const potentialHeaders = document.querySelectorAll('[class*="h-[60px]"], [class*="top-"]');
        potentialHeaders.forEach(function(elem) {
          const rect = elem.getBoundingClientRect();
          if (rect.top === 0 && rect.height === 60 && !elem.hasAttribute('data-header-fixed')) {
            elem.style.position = 'fixed';
            elem.style.top = '0';
            elem.style.left = '0';
            elem.style.right = '0';
            elem.style.zIndex = '100000';
            elem.setAttribute('data-header-fixed', 'true');
            console.log('Header-like element fixed');
          }
        });
      }

      setTimeout(fixHeader, 100);
      setTimeout(fixHeader, 300);
      setTimeout(fixHeader, 600);
      setTimeout(fixHeader, 1000);

      const observer = new MutationObserver(fixHeader);
      if (document.body) {
        observer.observe(document.body, { childList: true, subtree: true });
      }
    })();

    // Добавить отступ контенту от левого меню
    (function() {
      function addContentMargin() {
        const path = window.location.pathname;
        const isProfilePage = path === '/cabinet/profile' || path === '/cabinet/profile/';

        if (isProfilePage) {
          // Найти основной контент блок
          const contentBlocks = document.querySelectorAll('div.relative.p-6');

          contentBlocks.forEach(function(block) {
            if (!block.hasAttribute('data-margin-added')) {
              block.style.marginLeft = '69px';
              block.style.marginTop = '16px';
              block.setAttribute('data-margin-added', 'true');
              console.log('Content margin added');
            }
          });
        }
      }

      setTimeout(addContentMargin, 100);
      setTimeout(addContentMargin, 300);
      setTimeout(addContentMargin, 600);
      setTimeout(addContentMargin, 1000);
      setTimeout(addContentMargin, 2000);

      const observer = new MutationObserver(addContentMargin);
      if (document.body) {
        observer.observe(document.body, { childList: true, subtree: true });
      }
    })();

    // Удалить <ol> элемент из футера
    (function() {
      function removeOlFromFooter() {
        const footer = document.querySelector('[data-footer-unified]');
        if (footer) {
          const olElement = footer.querySelector('ol');
          if (olElement) {
            olElement.remove();
            console.log('OL element removed from footer');
          }
        }
      }

      setTimeout(removeOlFromFooter, 100);
      setTimeout(removeOlFromFooter, 300);
      setTimeout(removeOlFromFooter, 600);
      setTimeout(removeOlFromFooter, 1000);
      setTimeout(removeOlFromFooter, 2000);

      const observer = new MutationObserver(removeOlFromFooter);
      if (document.body) {
        observer.observe(document.body, { childList: true, subtree: true });
      }

      setInterval(removeOlFromFooter, 1000);
    })();

    // Добавить футер на страницах /cabinet/news, /cabinet/support, /cabinet/finance и /cabinet/structure
    (function() {
      function addContentFooter() {
        const path = window.location.pathname;
        const isNewsPage = path === '/cabinet/news' || path === '/cabinet/news/';
        const isSupportPage = path === '/cabinet/support' || path === '/cabinet/support/';
        const isFinancePage = path === '/cabinet/finance' || path === '/cabinet/finance/';
        const isStructurePage = path === '/cabinet/structure' || path === '/cabinet/structure/';

        if (!isNewsPage && !isSupportPage && !isFinancePage && !isStructurePage) return;

        // Проверить, что футер уже добавлен
        const existingFooter = document.querySelector('[data-content-footer="true"]');
        if (existingFooter) {
          // Обновить стили существующего футера
          existingFooter.style.cssText = 'position: fixed !important; bottom: 20px !important; left: 89px !important; right: 15px !important; display: flex !important; align-items: center !important; justify-content: space-between !important; visibility: visible !important; opacity: 1 !important; z-index: 9999 !important; background-color: transparent !important; pointer-events: auto !important;';
          return;
        }

        // Создать футер блок
        const footerBlock = document.createElement('div');
        footerBlock.className = 'flex items-center justify-between';
        footerBlock.style.cssText = 'position: fixed !important; bottom: 20px !important; left: 89px !important; right: 15px !important; display: flex !important; align-items: center !important; justify-content: space-between !important; visibility: visible !important; opacity: 1 !important; z-index: 9999 !important; background-color: transparent !important; pointer-events: auto !important;';
        footerBlock.setAttribute('data-content-footer', 'true');
        footerBlock.innerHTML = '<span class="text-[#95b5de] text-base">2019 © ООО Албикс. Все права защищены.</span><div class="flex items-center gap-[8px]"><a href="#" class="w-[32px] h-[32px] rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors"><img src="/assets/social_yt-D-OAslMW.png" alt="YouTube" class="w-[20px] h-[20px] object-contain"></a><a href="#" class="w-[32px] h-[32px] rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors"><img src="/assets/social_vk-DVhhSvRr.png" alt="VK" class="w-[18px] h-[18px] object-contain"></a><a href="#" class="w-[32px] h-[32px] rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors"><img src="/assets/social_inst-Be0b4DfN.png" alt="Instagram" class="w-[20px] h-[20px] object-contain"></a><a href="#" class="w-[32px] h-[32px] rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors"><img src="/assets/social_ok-1imOTysm.png" alt="OK" class="w-[20px] h-[20px] object-contain"></a></div>';

        // ВСТАВИТЬ В BODY НАПРЯМУЮ
        document.body.appendChild(footerBlock);
        console.log('Content footer FORCED into body at ' + path);
      }

      setTimeout(addContentFooter, 10);
      setTimeout(addContentFooter, 50);
      setTimeout(addContentFooter, 100);
      setTimeout(addContentFooter, 300);
      setTimeout(addContentFooter, 600);
      setTimeout(addContentFooter, 1000);
      setTimeout(addContentFooter, 2000);

      const observer = new MutationObserver(addContentFooter);
      if (document.body) {
        observer.observe(document.body, { childList: true, subtree: true });
      }

      setInterval(addContentFooter, 100);
    })();

    // Заменить хедер на страницах /cabinet/news, /cabinet/support, /cabinet/info, /cabinet/photo, /cabinet/cashback, /cabinet/structure и /cabinet/finance
    (function() {
      function replaceNewsHeader() {
        const path = window.location.pathname;
        const isNewsPage = path === '/cabinet/news' || path === '/cabinet/news/';
        const isSupportPage = path === '/cabinet/support' || path === '/cabinet/support/';
        const isInfoPage = path === '/cabinet/info' || path === '/cabinet/info/';
        const isPhotoPage = path === '/cabinet/photo' || path === '/cabinet/photo/';
        const isCashbackPage = path === '/cabinet/cashback' || path === '/cabinet/cashback/';
        const isStructurePage = path === '/cabinet/structure' || path === '/cabinet/structure/';
        const isFinancePage = path === '/cabinet/finance' || path === '/cabinet/finance/';

        if (!isNewsPage && !isSupportPage && !isInfoPage && !isPhotoPage && !isCashbackPage && !isStructurePage && !isFinancePage) return;

        // Проверить, что наш хедер уже добавлен
        const existingHeader = document.querySelector('[data-news-header-replaced="true"]');
        if (existingHeader) {
          // Обновить стили существующего хедера
          existingHeader.style.cssText = 'position: fixed !important; top: 0px !important; left: 0px !important; right: 0px !important; z-index: 100000 !important; pointer-events: auto !important; display: block !important; visibility: visible !important; opacity: 1 !important; height: 60px !important;';
          // Удалить все другие хедеры
          const otherHeaders = document.querySelectorAll('header:not([data-news-header-replaced])');
          otherHeaders.forEach(function(header) {
            header.remove();
          });
          return;
        }

        // Удалить все старые хедеры без нашего атрибута
        const oldHeaders = document.querySelectorAll('header:not([data-news-header-replaced])');
        oldHeaders.forEach(function(header) {
          header.remove();
        });

        // Создать новый хедер
        const newHeader = document.createElement('header');
        newHeader.className = 'h-[60px] bg-[#fefefe] flex-shrink-0 relative z-20';
        newHeader.setAttribute('data-header-fixed', 'true');
        newHeader.setAttribute('data-news-header-replaced', 'true');
        newHeader.style.cssText = 'position: fixed !important; top: 0px !important; left: 0px !important; right: 0px !important; z-index: 100000 !important; pointer-events: auto !important; display: block !important; visibility: visible !important; opacity: 1 !important; height: 60px !important;';
        newHeader.innerHTML = '<a class="absolute top-[10px] left-[20px]" href="/"><img src="/images/logo.png?v=111" alt="Albixe" class="h-[40px] w-auto object-contain"></a><div class="absolute top-[38px] left-[72px] text-[#a8d4e5] text-[5px] font-semibold" style="font-family: Inter, sans-serif;">POWER TECH</div><a href="https://albixe.com" class="absolute top-[20px] left-[656px] text-[#7095b1] text-[16px] hover:underline" style="font-family: Inter, sans-serif;">albixe.com</a><div class="absolute top-[16px] right-[100px] flex items-center gap-2"><img src="/assets/flag_usa-CYCU23Vu.png" alt="EN" class="w-[30px] h-[21px]"><span class="text-[#7095b1] text-base">Eng</span></div><a class="absolute top-[21px] right-[20px] w-[18px] h-[18px] hover:opacity-80" href="/" style="display: block !important; width: 18px !important; height: 18px !important;"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAO60lEQVR4nOWce6xnV1XHP591zu9378zQKYV2ptMHAbQFEoEoaEwkVuyT8gihnRqjCUXToNGER6gTWsrNLX2ArWk0RsRCgIh/2LFKQMpQWswIBBH4wwfyKmJCSzu1Flo6c+/9/c7ZX/84j9/5Pe5MZ+Z375TyTc49v3P22nuvvc7aaz/W2keMQ1x67XOU+n8JugDIAPF0hxli7va28vf4h+X7u0mjxp/3lmdqyzOvodQvI52D9GxEb9OZPSFIQ5IfxtzlrH8tJ53zKHuvSIBzQFywZ7ti282k8pUEu7C3InIH4FqGjSjd3D1VzRgdmtY9139m6WRTXFvPkRTXsx+bOrrJTVGaKLNug6Qc8SyCi8XwbP34v76Q4EaASgT5tmuI9Eqks5FOcqbcEaCAqC91LlTfo660vjdpqP7/xCVG9DS0MaJv8zTlMcoz9lvr8NFJC43yNXRS2x5lgbIMRYYlgRawdmH9os0reM2tp1Y5L3rP2Yr0MeyXIp3kyKIqqCttQXIl8fYN1b/F6D760XlzDUHnLcsTGlLnU/fNz0ifUrOuJnTrmVQf1wJqBOxanpWQbUMCnFDyAKWHkD5j0vW58O2Ic0hssYjqBUZdWaoaYjqXRww0Qmr563afpmu683+NBDzZQK3TZVsBzcrXqbeb5gmCtouNy1BR16uoFDkJwj2sHThdKuuMHPkCTELkIzUHFWUilUZKOEpwGq+4w0hUsqzuMxrTzTdZRjf/TKHMevaoy7nOPxMdiaRU19Ha1MApww5FJudZQODSkt1HsQNxUY4UQOa2OwicICVj3w/6D0gHsI3q1zxpPyfMyVHjWPN18x8JrawMdqUJZif2i3E6q7WLDuwUCgWYnI5IK1sDrTAc/2an28n4dsVIrN8Pson70eJY8x1L+SlVfb3kXBFXIZ1ZGaLJoVPk3YdWzFWXLhAHgP/k08v/s8HsnxhcvDQADmAKEhlKtU0aDTYjAY0ZzyTsVI1m9DeZ7c1D0CcJkhMkjeZg7pA0GBu+awIZIjvc8PKTjcjcjp7tUM/U+FGj6VqeIvqpQLfNHUsUM4ns0WT36Y5mBG1NjMe6WMcGNYlMTYh/OlA3emyyO2mD2lGu6YybAvGapa1ceMu2zapwJpqeA8w20g1Vu97aFK7EhUunxYB3SKt72P0nWzar5im0C+lxTBvp5vdm4JKbTlUv3mrlbwBeo8cfv5Hdd2z0lHE2uhrUQd4mpo4N2nDUVnEtbWfBL4b0PKQh1kvgS31gZTO4AEZrwHapNb4o7NggV0JKZb210eaaPy6+6bm6+PplLRQfBb0ceSv4GYif1WPb388vLW3fmIpnoGtkZuwojJILQ1lWl8uNY+j8pXOl4e+j9Js4Xgx+NpBh9TA7IF6hU7JbuOSdp20cE+uhu9lXIcaGdTV7QFQjWgpYLeenRrv3nEyWvRzzMqzTwNuMcpPL0QsUC8Au7PPF4hKXLJ01t7qfLLr7ckCgdJBIB7WYHdRi76C2LhzU1oWD5HoCp1WK6Z2aY8bDiwfJ8q8ivoz0KKgQMhGQB+71A2kRfAbEq5Tyd3Dhe543t/qfDDyuQTmwF6g7W0fFzJqlr7G9/+O5Vb5/uWD3Hd/1wW9+TClylHZj71IqFxwhshyhoBguOJVnIL1WEaXPX/oA9y5/e258HA7tDmWF3GQ3TBEZyHJTph+z69QfzZWBvVeULC19y1/hI0oWcDn2LhXDBSLkXo8IhYdrfcryDMTrlWfJF7/vg3xmz7fmyguM5sTrGJITuaAQl77rhUr5lZjfAO0gYtH9LcrzHIohaW3VTuUA9ADBnQ59mLve/Y25cfDq689R6atJ/JZha80VpBJl1QzoRC5HzV03fMPJH0a6A3iYslxlsGq5IPp9ssUtUpb1cXkW5jIlruxfev2L5vpW28Vqs93sqeQTi7uXv9kbpg+C9kIcUFmupNXV5DQkFvrkW7Yqer0e5iyndNkwcWXv0utfNH9GZs+QT7yAgMG9y9922vIXSHeCHk5FsVKurCbKkqxXCynPcqyzqYXERTe+cC6Vtzaonu9MrMeeEgIC4LNXf89e/VMyfRzxqIu0Wq4cchamv7DAwpatkfeznuE5pHS5onwTF1x/znHXO9bFaszeUXwK4O4bv2/HTUifQP5hKouUhellorfYp791q/I8z+10Fvbl6vmq454njY1iHQdPjZxX33DmcVUwbxROXuh/SKtrv06W7USNt8mo30PeIh9SXg6HZ4q4THLm85ZuY/942MqTRseJ3HazjgblKss/Pv5WzQkmsBdYLbcZTg1wT4lMGVGvfFjsk0QMDqZ+OSjPVOgN2kLmC5du4rPLDx91nUfUIPy6mrkj45jG18MEHbT/bbwoMlLg6EkOiTBZNbGXKi9UMv1+DmmL1nyo77LcCfFaZc78xtuu46Nv+9FRsTelQePIgWdg8Fq9gm+iIJr2TAR5tD+6ruo2SEBTo0D17NHvNshCSCIEkYmIIAuRVeEpziNXroRCyJCpCiBAwgqi3yNni4pDqwsuyl1EvEoPPpb7wlvewWevPnhUQoJRGyZkFK0Zn9xqVafBClBWkSubuLqxQ53nCIhsPH9kQFZ5vOtnRYbIkALV+TOFKq3Jahd6E6xgXHs+hSEy3O8FWSxAOh3pVxSH3nlsu5JNvNFMr4aq0I9WOJ2wkEYjun2U2o3dumgn/8/IjdLmrzfkau1LSciGEI7KaSdVISLCBImRQ131loLrmhr3cNWw+ThhEq0Gja/mu7sZTWesheHEVAhe956ohEhdaLNV0OW4fRmqJxWpFaKl0dYTUcm3zMicXO0RpToQoyIywi6xE06GsoDBWlKZ1oh4CKcv2ttuZu8VR7/j1yw1ZmjQEwi09Vj3yjtu6sNCI63q9HWXUA6hxFTWhli1eoiITHHyKdsjz7M6wM2UCcoExbCgWFk1ZVoj04OQPu3TT76Oj77tGOxPpx0TyEGfaPjfHKxXkXAzzMM27J935M8sXU2DnExJSZlMsTakOLTmNEwDhQ5A+qRLbjrqEWwK0z733Fn2R8dX6JxRkFjITtfq4G/Ap4hE6SDZpBKGawWDlbWUinKoLB7AfNwr3Mb+Y5gDTWF6NZ/zqXc9cPwFzxGX3HiaBoPfRWx3SiqTCZWkMjEcFKytrDkVZaHQA4TvdBHvP+ZZ9BQ8sq018nVpTwQuuvZsKb2dwq9DcYpyRZlM6ZJyUDBcXbPLspDifqS/85APcs9135sfA9O++aeOgC685XnS6h9Q+vUEz1KmxWyhr7JMpLKkWB0mF6lA+j6hO52yD3PPtd+ZS91jnh1GTtTxELwTh/75S+cOY+UqzGXgHUS2GAu9SMpIgyFpMLSTW+H0go8M9l37zflzsp7r+UTioqUXDiN+B3s3sIMsFun3ZII0LGAwNGUaErofVcIZznNfGqbmuqOI/xMroHrTXldiXwHaQaZF57kkVcIphiZ5QPAA4k4HHxnMWzgTLE0N81zynp+ZSdu4fZ5z6o/4qzcP58rH0lLwlfIFSr03YV8OsRN5wXkmEC4KGJZJ9oCIH2D+3l74EHdtgNtnDJ62QaJ81xSdBOVwzehLPPjIPuDA3HjYfUfGl7/+AtF/I/hy0C7EgrOsWouUJUplwh6g+AHEx10Mb+fePRvoOOxY6RldbHdF43F66aDsgR8ffJF5Cei8pZwn7nu+Er9N5sswpyMtODJhVcIpy4S9RsSDJH3SyX/OvctzHMpn4LCjmGMbBg+HI+IwynsitEg+x33rHavb+GH+MnL9AuYkkqOdmDkhyoRZBT0I3ucob2XfvCaBh0EbuMGUlzVaqVW7WPVJn9pYhWFxjnHSe9/3GMPiK3Lsx/460kPAqlwkOZUkr6H4AdK9ZnV5U4QzibEjWY1XQ4DyzuG5DTyq+s/L96XPvPtml8WbEfsgPQoMkNfIuB97v39YXs2+m/93Yxg4AqY0qPurOTd1vKdvjsQAwD03fMdO7yX0VaTHgPuxv+C18g/51+XHN6j2I2Oi3aN5UHOEESqbUG+wbegpHPUP4vTvkLahuM8r6W3sX17dwBqPGiMNGjtjuknYd80jzos/c9Jfe6W4+sQJR4zOya7revbIUG+anGT+cfkR4uS/Zf/yE5tR4xS6Ua7T+2VdAR3Zf7Vh2PeWtc2tsIOpKNfJpUabyKibaXpn7WmLrr1t2z8ayjo2qP7TPb/+UyKjMeG05+WqxndO+2jTe9ZTArOsSmctNr2MaKfdtZqlOcZJP9WQypFW1APZaOO+kty4gEZDnInak5cYbA63JwCJQbWkIgi7mgs2iettmHW9rmYn8HO8aqk62Pt0Ob/a9IqSc4GdBLm6JrczSOU0fcmuXM0EhERpgV8qxZtJVB8WSJ2hbb2ON/YVhsMwOUk3SX+k/OuVtx66r9Z1aImaDws0YSOV612RGVxgZXl1/JskO3dqgnACIkTyWYgzQCUojSrqrHjHIkIYTba61yxhzqLr0s96Xq+cSfpJTOar4gkCuQpZUcjuxCIoCkiPAF/Lse4h/BKSn43pV8v9wNEPMoNTBvWHltoT0V0H/wSHzZxibG7RkDZ+fFWbUl26JhCimYOkOjKkee7MTUbldBqfGKdvC/Z4ubXyVGE01VF5d87rikiYFeC7HsRbw+gqzHcQKxLVB0xSfeInNd/m6TS2vXcmlS2jqj+r07mr05KYkT527zS4fe7eJ8vpfDeom7/L4yTPGgVyQB17VH2rBBnjtAZ+COvz/NN13w3uvu77oH9BPIRYkQtTFKYYVmEXwwQF9WUoqQ/ePYm7qeKOUi30J5VPh0lPdWOY+D/r5E+j57J+LhMUZdWuYQHDEioDYswKEQ9Q6HMm3QpWDsjFwZsU27aT8avA6cq8AKkPym2JotHWzrZkt7OPLUsa9Z9Mb7QpjTbGXdON3ek8e1Rve68Jut21+4GlLp/Qms6Wt0ZD6zKVyYgCcwj7AI7P+VnltexdfhSWO+brgj0nKxb3EPEiknZCei7SqUhH/tDbkQzj5Gx10vAe7X2yzFkDxSw+ZjM/BD+C+W+Iz7s4dCv3vvf/Zmc/77yc/b+WuGjh+dLwNuxL6+DBI9Xyk4lK0xIRn3KZvZ27r7lvkuT/AZtlNnY0wJ5oAAAAAElFTkSuQmCC" alt="Exit" style="display: block !important; width: 18px !important; height: 18px !important; max-width: 18px !important; max-height: 18px !important; min-width: 18px !important; min-height: 18px !important; object-fit: contain !important; opacity: 1 !important; visibility: visible !important; filter: brightness(1.5) contrast(2) saturate(1.5) !important;"></a>';

        // Добавить хедер в body как первый элемент
        document.body.insertBefore(newHeader, document.body.firstChild);
        console.log('News page header added to body');
      }

      setTimeout(replaceNewsHeader, 10);
      setTimeout(replaceNewsHeader, 50);
      setTimeout(replaceNewsHeader, 100);
      setTimeout(replaceNewsHeader, 300);
      setTimeout(replaceNewsHeader, 600);
      setTimeout(replaceNewsHeader, 1000);
      setTimeout(replaceNewsHeader, 2000);

      const observer = new MutationObserver(replaceNewsHeader);
      if (document.body) {
        observer.observe(document.body, { childList: true, subtree: true });
      }

      setInterval(replaceNewsHeader, 100);
    })();

    // Добавить блок профиля на странице /cabinet/finance
    (function() {
      function addProfileBlock() {
        const path = window.location.pathname;
        const isFinancePage = path === '/cabinet/finance' || path === '/cabinet/finance/';

        if (!isFinancePage) return;

        // Проверить, что блок уже добавлен
        const existingBlock = document.querySelector('[data-profile-block="true"]');
        if (existingBlock) {
          // Обновить стили существующего блока
          existingBlock.style.cssText = 'position: fixed !important; top: 80px !important; right: 20px !important; width: 185px !important; z-index: 9998 !important; display: flex !important; flex-direction: column !important; gap: 8px !important; visibility: visible !important; opacity: 1 !important; pointer-events: auto !important;';
          return;
        }

        // Создать блок профиля
        const profileBlock = document.createElement('div');
        profileBlock.className = 'w-[185px] flex flex-col gap-2';
        profileBlock.style.cssText = 'position: fixed !important; top: 80px !important; right: 20px !important; width: 185px !important; z-index: 9998 !important; display: flex !important; flex-direction: column !important; gap: 8px !important; visibility: visible !important; opacity: 1 !important; pointer-events: auto !important;';
        profileBlock.setAttribute('data-profile-block', 'true');
        profileBlock.innerHTML = '<div class="bg-[#246393] rounded p-4 flex flex-col items-center"><div class="w-[145px] h-[145px] bg-[#1f5986] rounded flex flex-col items-center justify-center cursor-pointer hover:bg-[#2a6a9a] transition-colors"><img src="/assets/camera-Bca7ToUt.png" alt="Загрузить фото" class="w-10 h-10 mb-2 opacity-70"><span class="text-[#92aec4] text-[13px]">Загрузить свое</span><span class="text-[#97b1c6] text-sm">фото</span></div><div class="bg-[#1f5986] border border-[#286ea3] rounded h-[31px] w-full mt-4 flex items-center justify-center"><span class="text-[#98b2c7] text-[13px]">ID 4586</span></div><div class="text-center mt-4"><div class="text-[#a8c8e4] text-[15px]">Иванов Иван</div><div class="text-[#a8c7e4] text-base font-light">Иванович</div></div></div><div class="bg-[#246393] rounded p-4"><div class="bg-[#1f5986] border border-[#2a75a4] rounded h-[31px] flex items-center justify-center mb-2"><span class="text-[#9ab4c8] text-xs">Статус</span></div><div class="text-center text-[#a1c5e2] text-[13px]">Отсутствует</div></div>';

        // ВСТАВИТЬ В BODY НАПРЯМУЮ
        document.body.appendChild(profileBlock);
        console.log('Profile block FORCED into body on /cabinet/finance');
      }

      setTimeout(addProfileBlock, 10);
      setTimeout(addProfileBlock, 50);
      setTimeout(addProfileBlock, 100);
      setTimeout(addProfileBlock, 300);
      setTimeout(addProfileBlock, 600);
      setTimeout(addProfileBlock, 1000);
      setTimeout(addProfileBlock, 2000);

      const observer = new MutationObserver(addProfileBlock);
      if (document.body) {
        observer.observe(document.body, { childList: true, subtree: true });
      }

      setInterval(addProfileBlock, 100);
    })();

    // Удалить блоки с правой стороны на главной странице /cabinet
    (function() {
      function removeBlocks() {
        const path = window.location.pathname;
        const hash = window.location.hash;

        // Проверить что это главная страница /cabinet
        const isMainCabinet = (path === '/cabinet' || path === '/cabinet/') && (!hash || hash === '' || hash === '#' || hash === '#/');

        if (!isMainCabinet) return;

        // Удалить блоки по data-node-id
        const block246 = document.querySelector('[data-node-id="8:246"]');
        const block247 = document.querySelector('[data-node-id="8:247"]');
        const block271 = document.querySelector('[data-node-id="8:271"]');

        if (block246) {
          block246.remove();
          console.log('Block 8:246 removed from /cabinet');
        }

        if (block247) {
          block247.remove();
          console.log('Block 8:247 removed from /cabinet');
        }

        if (block271) {
          block271.remove();
          console.log('Block 8:271 removed from /cabinet');
        }
      }

      setTimeout(removeBlocks, 10);
      setTimeout(removeBlocks, 50);
      setTimeout(removeBlocks, 100);
      setTimeout(removeBlocks, 300);
      setTimeout(removeBlocks, 600);
      setTimeout(removeBlocks, 1000);
      setTimeout(removeBlocks, 2000);

      const observer = new MutationObserver(removeBlocks);
      if (document.body) {
        observer.observe(document.body, { childList: true, subtree: true });
      }

      setInterval(removeBlocks, 100);
    })();

    // Добавить блок профиля на главной странице /cabinet
    (function() {
      function addProfileBlockCabinet() {
        const path = window.location.pathname;
        const hash = window.location.hash;

        // Проверить что это главная страница /cabinet
        const isMainCabinet = (path === '/cabinet' || path === '/cabinet/') && (!hash || hash === '' || hash === '#' || hash === '#/');

        if (!isMainCabinet) return;

        // Проверить, что блок уже добавлен
        const existingBlock = document.querySelector('[data-profile-block-cabinet="true"]');
        if (existingBlock) {
          // Обновить стили существующего блока
          existingBlock.style.cssText = 'position: fixed !important; top: 80px !important; right: 20px !important; width: 185px !important; z-index: 9998 !important; display: flex !important; flex-direction: column !important; gap: 8px !important; visibility: visible !important; opacity: 1 !important; pointer-events: auto !important;';
          return;
        }

        // Создать блок профиля
        const profileBlock = document.createElement('div');
        profileBlock.className = 'w-[185px] flex flex-col gap-2';
        profileBlock.style.cssText = 'position: fixed !important; top: 80px !important; right: 20px !important; width: 185px !important; z-index: 9998 !important; display: flex !important; flex-direction: column !important; gap: 8px !important; visibility: visible !important; opacity: 1 !important; pointer-events: auto !important;';
        profileBlock.setAttribute('data-profile-block-cabinet', 'true');
        profileBlock.innerHTML = '<div class="bg-[#246393] rounded p-4 flex flex-col items-center"><div class="w-[145px] h-[145px] bg-[#1f5986] rounded flex flex-col items-center justify-center cursor-pointer hover:bg-[#2a6a9a] transition-colors"><img src="/assets/camera-Bca7ToUt.png" alt="Загрузить фото" class="w-10 h-10 mb-2 opacity-70"><span class="text-[#92aec4] text-[13px]">Загрузить свое</span><span class="text-[#97b1c6] text-sm">фото</span></div><div class="bg-[#1f5986] border border-[#286ea3] rounded h-[31px] w-full mt-4 flex items-center justify-center"><span class="text-[#98b2c7] text-[13px]">ID 4586</span></div><div class="text-center mt-4"><div class="text-[#a8c8e4] text-[15px]">Иванов Иван</div><div class="text-[#a8c7e4] text-base font-light">Иванович</div></div></div><div class="bg-[#246393] rounded p-4"><div class="bg-[#1f5986] border border-[#2a75a4] rounded h-[31px] flex items-center justify-center mb-2"><span class="text-[#9ab4c8] text-xs">Статус</span></div><div class="text-center text-[#a1c5e2] text-[13px]">Отсутствует</div></div>';

        // ВСТАВИТЬ В BODY НАПРЯМУЮ
        document.body.appendChild(profileBlock);
        console.log('Profile block FORCED into body on /cabinet');
      }

      setTimeout(addProfileBlockCabinet, 10);
      setTimeout(addProfileBlockCabinet, 50);
      setTimeout(addProfileBlockCabinet, 100);
      setTimeout(addProfileBlockCabinet, 300);
      setTimeout(addProfileBlockCabinet, 600);
      setTimeout(addProfileBlockCabinet, 1000);
      setTimeout(addProfileBlockCabinet, 2000);

      const observer = new MutationObserver(addProfileBlockCabinet);
      if (document.body) {
        observer.observe(document.body, { childList: true, subtree: true });
      }

      setInterval(addProfileBlockCabinet, 100);
    })();

    // Переместить main блок в div root на странице /cabinet/structure ЖЕЕЕЕЕСТКО
    (function() {
      function moveMainToRoot() {
        const path = window.location.pathname;
        const isStructurePage = path === '/cabinet/structure' || path === '/cabinet/structure/';

        if (!isStructurePage) return;

        // Найти div root
        const root = document.getElementById('root');
        if (!root) return;

        // Попробовать найти main элемент разными способами
        let mainBlock = document.querySelector('main[class*="absolute"][class*="top-"][class*="left-"]');
        if (!mainBlock) {
          mainBlock = document.querySelector('main.absolute');
        }
        if (!mainBlock) {
          mainBlock = document.querySelector('main');
        }

        if (mainBlock) {
          // ПРИНУДИТЕЛЬНО переместить в root ВСЕГДА
          if (mainBlock.parentElement !== root) {
            root.appendChild(mainBlock);
            console.log('Main block FORCED to root on /cabinet/structure');
          }

          // Применить ЖЕСТКИЕ стили БЕЗ РАСТЯЖЕНИЯ
          mainBlock.style.cssText = 'position: absolute !important; top: 60px !important; left: 69px !important; right: 0 !important; display: block !important; visibility: visible !important; opacity: 1 !important; z-index: 1 !important; min-height: auto !important; height: auto !important;';
          mainBlock.setAttribute('data-moved-to-root', 'true');

          // Найти первый div внутри main и применить стили
          const firstDiv = mainBlock.querySelector('div');
          if (firstDiv) {
            firstDiv.style.cssText = 'padding: 24px !important; display: block !important; visibility: visible !important; opacity: 1 !important;';
          }
        }
      }

      setTimeout(moveMainToRoot, 5);
      setTimeout(moveMainToRoot, 10);
      setTimeout(moveMainToRoot, 20);
      setTimeout(moveMainToRoot, 50);
      setTimeout(moveMainToRoot, 100);
      setTimeout(moveMainToRoot, 200);
      setTimeout(moveMainToRoot, 300);
      setTimeout(moveMainToRoot, 500);
      setTimeout(moveMainToRoot, 800);
      setTimeout(moveMainToRoot, 1000);
      setTimeout(moveMainToRoot, 1500);
      setTimeout(moveMainToRoot, 2000);
      setTimeout(moveMainToRoot, 3000);

      const observer = new MutationObserver(moveMainToRoot);
      if (document.body) {
        observer.observe(document.body, { childList: true, subtree: true });
      }

      setInterval(moveMainToRoot, 50);
    })();

    </script>
  <style>.hide-scrollbar::-webkit-scrollbar{display:none;}.hide-scrollbar{-ms-overflow-style:none;scrollbar-width:none;}</style>
  <style>.hide-scrollbar::-webkit-scrollbar{display:none;}.hide-scrollbar{-ms-overflow-style:none;scrollbar-width:none;}</style>
    <script>
    // ЕДИНЫЙ СКРИПТ ДЛЯ /cabinet/support - ПЕРЕНОС MAIN В ROOT
    (function() {
      function MEGA_MOVE_SUPPORT() {
        var path = window.location.pathname;
        if (path !== '/cabinet/support' && path !== '/cabinet/support/' && path !== '/cabinet/info' && path !== '/cabinet/info/' && path !== '/cabinet/photo' && path !== '/cabinet/photo/' && path !== '/cabinet/cashback' && path !== '/cabinet/cashback/') return;
        
        var root = document.getElementById('root');
        var mainBlock = document.querySelector('main');
        
        if (!root || !mainBlock) return;
        
        // Если main уже в root - выходим
        if (mainBlock.parentElement === root) return;
        
        // Клонируем main и вставляем в root
        var clone = mainBlock.cloneNode(true);
        root.appendChild(clone);
        mainBlock.remove();
        
        // Применяем стили
        clone.style.cssText = 'position: absolute !important; top: 60px !important; left: 69px !important; right: 0 !important; bottom: 0 !important; display: flex !important; align-items: center !important; justify-content: center !important; visibility: visible !important; opacity: 1 !important; z-index: 10 !important;';
        
        console.log('MEGA: main перемещен в root');
      }
      
      setInterval(MEGA_MOVE_SUPPORT, 50);
      for (var i = 0; i < 5000; i += 50) {
        setTimeout(MEGA_MOVE_SUPPORT, i);
      }
      new MutationObserver(MEGA_MOVE_SUPPORT).observe(document.documentElement, {childList: true, subtree: true});
    })();
    
    // Скрыть футер на странице новостей
    (function() {
      function hideFooterNews() {
        var path = window.location.pathname;
        if (path !== '/cabinet/news' && path !== '/cabinet/news/') return;
        
        var footer = document.querySelector('[data-content-footer]');
        if (footer) footer.remove();
        
        var bottoms = document.querySelectorAll('[class*=bottom-]');
        bottoms.forEach(function(el) {
          if (el.textContent && el.textContent.indexOf('Албикс') !== -1) {
            el.remove();
          }
        });
      }
      setInterval(hideFooterNews, 100);
    })();
    </script>
<script>    // Футер для /cabinet/cashback    (function() {      function fixCashbackFooter() {        var path = window.location.pathname;        if (path !== "/cabinet/cashback" && path !== "/cabinet/cashback/") return;                var oldFooter = document.querySelector("[data-content-footer]");        if (oldFooter) oldFooter.remove();                var existingFooter = document.querySelector("[data-footer-unified]");        if (existingFooter) {          existingFooter.style.cssText = "position: fixed; bottom: 0px; left: 69px; right: 0px; height: 60px; display: flex; align-items: center; justify-content: space-between; padding: 0px 30px; background-color: transparent; z-index: 9999;";          return;        }                var footer = document.createElement("div");        footer.setAttribute("data-footer-unified", "true");        footer.style.cssText = "position: fixed; bottom: 0px; left: 69px; right: 0px; height: 60px; display: flex; align-items: center; justify-content: space-between; padding: 0px 30px; background-color: transparent; z-index: 9999;";        document.body.appendChild(footer);      }      setInterval(fixCashbackFooter, 100);      [0,50,100,200,500,1000].forEach(function(t) { setTimeout(fixCashbackFooter, t); });    })();    </script>
<script>    (function(){      function CASHBACK_FOOTER_ULTRA(){        if(location.pathname.indexOf("/cabinet/cashback")===-1)return;        document.querySelectorAll("[data-content-footer]").forEach(function(e){e.remove();});        var f=document.querySelector("[data-footer-unified]");        if(!f){          f=document.createElement("div");          f.setAttribute("data-footer-unified","true");          document.body.appendChild(f);        }        f.style.cssText="position:fixed!important;bottom:0!important;left:69px!important;right:0!important;height:60px!important;display:flex!important;align-items:center!important;justify-content:space-between!important;padding:0 30px!important;background-color:transparent!important;z-index:9999!important;";        f.innerHTML="<span style="color:#95b5de;font-size:16px;">2019 © ООО Албикс. Все права защищены.</span><div style="display:flex;align-items:center;gap:8px;"><a href="#" style="width:32px;height:32px;border-radius:50%;background:rgba(255,255,255,0.1);display:flex;align-items:center;justify-content:center;"><img src="/assets/social_yt-D-OAslMW.png" style="width:20px;height:20px;"></a><a href="#" style="width:32px;height:32px;border-radius:50%;background:rgba(255,255,255,0.1);display:flex;align-items:center;justify-content:center;"><img src="/assets/social_vk-DVhhSvRr.png" style="width:18px;height:18px;"></a><a href="#" style="width:32px;height:32px;border-radius:50%;background:rgba(255,255,255,0.1);display:flex;align-items:center;justify-content:center;"><img src="/assets/social_inst-Be0b4DfN.png" style="width:20px;height:20px;"></a><a href="#" style="width:32px;height:32px;border-radius:50%;background:rgba(255,255,255,0.1);display:flex;align-items:center;justify-content:center;"><img src="/assets/social_ok-1imOTysm.png" style="width:20px;height:20px;"></a></div>";      }      setInterval(CASHBACK_FOOTER_ULTRA,30);      new MutationObserver(CASHBACK_FOOTER_ULTRA).observe(document.documentElement,{childList:true,subtree:true});      for(var i=0;i<3000;i+=30)setTimeout(CASHBACK_FOOTER_ULTRA,i);    })();    </script>
<script>    (function(){      function CASHBACK_FOOTER_EXACT(){        if(location.pathname.indexOf("/cabinet/cashback")===-1)return;        var old=document.querySelector("[data-cashback-footer-exact]");        if(old)return;        document.querySelectorAll("[data-content-footer]").forEach(function(e){e.remove();});        document.querySelectorAll("[data-footer-unified]").forEach(function(e){e.remove();});        var f=document.createElement("div");        f.className="flex items-center justify-between";        f.setAttribute("data-content-footer","true");        f.setAttribute("data-cashback-footer-exact","true");        f.style.cssText="position: fixed !important; bottom: 20px !important; left: 89px !important; right: 15px !important; display: flex !important; align-items: center !important; justify-content: space-between !important; visibility: visible !important; opacity: 1 !important; z-index: 9999 !important; background-color: transparent !important; pointer-events: auto !important;";        f.innerHTML="<span class="text-[#95b5de] text-base">2019 © ООО Албикс. Все права защищены.</span><div class="flex items-center gap-[8px]"><a href="#" class="w-[32px] h-[32px] rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors"><img src="/assets/social_yt-D-OAslMW.png" alt="YouTube" class="w-[20px] h-[20px] object-contain"></a><a href="#" class="w-[32px] h-[32px] rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors"><img src="/assets/social_vk-DVhhSvRr.png" alt="VK" class="w-[18px] h-[18px] object-contain"></a><a href="#" class="w-[32px] h-[32px] rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors"><img src="/assets/social_inst-Be0b4DfN.png" alt="Instagram" class="w-[20px] h-[20px] object-contain"></a><a href="#" class="w-[32px] h-[32px] rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors"><img src="/assets/social_ok-1imOTysm.png" alt="OK" class="w-[20px] h-[20px] object-contain"></a></div>";        document.body.appendChild(f);      }      setInterval(CASHBACK_FOOTER_EXACT,30);      new MutationObserver(CASHBACK_FOOTER_EXACT).observe(document.documentElement,{childList:true,subtree:true});      for(var i=0;i<3000;i+=30)setTimeout(CASHBACK_FOOTER_EXACT,i);    })();    </script>
  <script>
(function() {
  function attachSupportHandler() {
    if (window.location.pathname.indexOf('/cabinet/support') !== 0) return;
    if (document.querySelector('[data-support-handler]')) return;

    // Find the "Отправить сообщение" button inside the support form
    var buttons = document.querySelectorAll('button');
    var btn = null;
    for (var i = 0; i < buttons.length; i++) {
      if (buttons[i].textContent.trim() === 'Отправить сообщение') {
        btn = buttons[i];
        break;
      }
    }
    if (!btn) return;

    btn.setAttribute('data-support-handler', '1');

    // Find the form container (the card with inputs)
    var card = btn.closest('div[style*="background:#1a4a6e"]') || btn.parentElement.parentElement.parentElement;
    var inputs = card.querySelectorAll('input');
    var textarea = card.querySelector('textarea');

    // inputs[0] = Тема, inputs[1] = Телефон, inputs[2] = Email
    // textarea = Текст обращения

    // Add message div
    var msgDiv = document.createElement('div');
    msgDiv.id = 'support-result-msg';
    msgDiv.style.cssText = 'display:none;padding:12px;border-radius:6px;margin:0 20px 15px 20px;font-size:14px;font-family:Inter,sans-serif;';
    btn.parentElement.parentElement.insertBefore(msgDiv, btn.parentElement);

    btn.addEventListener('click', function(e) {
      e.preventDefault();
      var subject = inputs[0] ? inputs[0].value.trim() : '';
      var phone = inputs[1] ? inputs[1].value.trim() : '';
      var email = inputs[2] ? inputs[2].value.trim() : '';
      var text = textarea ? textarea.value.trim() : '';

      var msg = document.getElementById('support-result-msg');

      if (!subject || !email || !text) {
        msg.style.display = 'block';
        msg.style.background = 'rgba(239,68,68,0.2)';
        msg.style.border = '1px solid #ef4444';
        msg.style.color = '#fca5a5';
        msg.textContent = 'Заполните все поля (тема, email и текст обращения)';
        return;
      }

      btn.disabled = true;
      btn.textContent = 'ОТПРАВКА...';
      btn.style.opacity = '0.5';
      msg.style.display = 'none';

      // Include phone in text if provided
      var fullText = text;
      if (phone) {
        fullText = 'Телефон: ' + phone + '\n\n' + text;
      }

      fetch('/api/cabinet/support', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        credentials: 'include',
        body: JSON.stringify({subject: subject, email: email, text: fullText})
      })
      .then(function(r) { return r.json(); })
      .then(function(data) {
        msg.style.display = 'block';
        if (data.success) {
          msg.style.background = 'rgba(34,197,94,0.2)';
          msg.style.border = '1px solid #22c55e';
          msg.style.color = '#86efac';
          msg.textContent = 'Сообщение успешно отправлено!';
          if (inputs[0]) inputs[0].value = '';
          if (inputs[1]) inputs[1].value = '';
          if (inputs[2]) inputs[2].value = '';
          if (textarea) textarea.value = '';
        } else {
          msg.style.background = 'rgba(239,68,68,0.2)';
          msg.style.border = '1px solid #ef4444';
          msg.style.color = '#fca5a5';
          msg.textContent = data.error || 'Ошибка отправки';
        }
      })
      .catch(function() {
        msg.style.display = 'block';
        msg.style.background = 'rgba(239,68,68,0.2)';
        msg.style.border = '1px solid #ef4444';
        msg.style.color = '#fca5a5';
        msg.textContent = 'Ошибка соединения с сервером';
      })
      .finally(function() {
        btn.disabled = false;
        btn.textContent = 'ОТПРАВИТЬ СООБЩЕНИЕ';
        btn.style.opacity = '1';
      });
    });
  }

  setInterval(attachSupportHandler, 500);

  var _ps = history.pushState;
  history.pushState = function() {
    _ps.apply(history, arguments);
    setTimeout(attachSupportHandler, 300);
  };
  window.addEventListener('popstate', function() {
    setTimeout(attachSupportHandler, 300);
  });
})();
</script>
<script>
// Dynamic profile sidebar - load real user data
(function() {
  var profileLoaded = false;

  function updateProfileBlock() {
    if (window.location.pathname.indexOf('/cabinet') !== 0) return;
    if (profileLoaded) return;

    var block = document.querySelector('[data-profile-block]') || document.querySelector('[data-profile-block-cabinet]');
    if (!block) {
      // Fallback: find any sidebar profile block by structure
      var candidates = document.querySelectorAll('div');
      for (var j = 0; j < candidates.length; j++) {
        var c = candidates[j];
        if (c.className && c.className.indexOf('w-[185px]') !== -1 && c.querySelector && c.querySelector('span') && c.innerHTML.indexOf('ID ') !== -1 && c.innerHTML.indexOf('Статус') !== -1) {
          block = c; break;
        }
      }
    }
    if (!block) return;

    var token = localStorage.getItem('auth_token');
    fetch('/api/cabinet/dashboard', {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': token ? 'Bearer ' + token : ''
      },
      credentials: 'include'
    })
    .then(function(r) { return r.json(); })
    .then(function(data) {
      if (!data.success || !data.dashboard) return;
      var d = data.dashboard;
      var u = d.user;
      profileLoaded = true;

      // Update ID
      var spans = block.querySelectorAll('span');
      for (var i = 0; i < spans.length; i++) {
        if (spans[i].textContent.indexOf('ID ') === 0) {
          spans[i].textContent = 'ID ' + u.uid;
        }
      }

      // Update name
      var divs = block.querySelectorAll('div');
      for (var i = 0; i < divs.length; i++) {
        var txt = divs[i].textContent.trim();
        if (txt === 'Иванов Иван') {
          divs[i].textContent = u.name + (u.surname ? ' ' + u.surname.charAt(0) + '.' : '');
          // Check next sibling for surname
          var next = divs[i].nextElementSibling;
          if (next && next.textContent.trim() === 'Иванович') {
            next.textContent = u.surname || '';
          }
        }
      }

      // Update status
      for (var i = 0; i < divs.length; i++) {
        if (divs[i].textContent.trim() === 'Отсутствует' && divs[i].previousElementSibling) {
          var prev = divs[i].previousElementSibling;
          var prevSpan = prev.querySelector('span');
          if (prevSpan && prevSpan.textContent.trim() === 'Статус') {
            divs[i].textContent = d.status || 'Отсутствует';
          }
        }
      }

      // Update photo if user has one
      if (u.image) {
        var photoContainer = block.querySelector('.w-\\[145px\\]');
        if (photoContainer) {
          photoContainer.innerHTML = '<img src="' + u.image + '" alt="Фото" style="width:145px;height:145px;object-fit:cover;border-radius:6px;" />';
        }
      }
    })
    .catch(function() {});
  }

  // Poll until block appears
  var intv = setInterval(function() {
    if (window.location.pathname.indexOf('/cabinet') === 0) {
      updateProfileBlock();
      if (profileLoaded) clearInterval(intv);
    }
  }, 500);

  // Reset on navigation
  var _ps = history.pushState;
  history.pushState = function() {
    _ps.apply(history, arguments);
    profileLoaded = false;
    setTimeout(updateProfileBlock, 300);
  };
  window.addEventListener('popstate', function() {
    profileLoaded = false;
    setTimeout(updateProfileBlock, 300);
  });
})();
</script>
<script>
// Update support page profile block with real data
(function() {
  function updateSupportProfile() {
    if (window.location.pathname.indexOf('/cabinet/support') !== 0) return;
    var uid = document.querySelector('[data-support-uid]');
    if (!uid || uid.getAttribute('data-updated')) return;

    var token = localStorage.getItem('auth_token');
    fetch('/api/cabinet/dashboard', {
      method: 'GET',
      headers: {'Content-Type': 'application/json', 'Authorization': token ? 'Bearer ' + token : ''},
      credentials: 'include'
    })
    .then(function(r) { return r.json(); })
    .then(function(data) {
      if (!data.success || !data.dashboard) return;
      var u = data.dashboard.user;
      uid.textContent = 'ID ' + u.uid;
      uid.setAttribute('data-updated', '1');
      var nameEl = document.querySelector('[data-support-name]');
      if (nameEl) nameEl.textContent = u.name || '';
      var surnameEl = document.querySelector('[data-support-surname]');
      if (surnameEl) surnameEl.textContent = u.surname || '';
      var statusEl = document.querySelector('[data-support-status]');
      if (statusEl) statusEl.textContent = data.dashboard.status || 'Отсутствует';
    }).catch(function(){});
  }
  setInterval(updateSupportProfile, 500);
})();</script>
<script>
// Update real balance on finance page
(function() {
  function updateBalance() {
    if (window.location.pathname.indexOf('/cabinet/finance') !== 0) return;
    var el = document.querySelector('[data-field="current_balance"]');
    if (!el || el.getAttribute('data-balance-loaded')) return;

    var token = localStorage.getItem('auth_token');
    fetch('/api/cabinet/dashboard', {
      method: 'GET',
      headers: {'Content-Type': 'application/json', 'Authorization': token ? 'Bearer ' + token : ''},
      credentials: 'include'
    })
    .then(function(r) { return r.json(); })
    .then(function(data) {
      if (!data.success || !data.dashboard) return;
      var bal = parseFloat(data.dashboard.balance) || 0;
      var formatted = bal.toLocaleString('ru-RU', {minimumFractionDigits: 0, maximumFractionDigits: 2});
      el.innerHTML = formatted + ' <span style="font-size:16px;font-weight:400;">РУБ.</span>';
      el.setAttribute('data-balance-loaded', '1');
    }).catch(function(){});
  }
  setInterval(updateBalance, 500);
  var _ps = history.pushState;
  history.pushState = function() { _ps.apply(history, arguments); setTimeout(updateBalance, 300); };
  window.addEventListener('popstate', function() { setTimeout(updateBalance, 300); });
})();
</script>
<script>
// Handle admin debug login - get fresh token for the target user
(function() {
  var params = new URLSearchParams(window.location.search);
  var debugAuth = params.get('debug_auth');
  if (!debugAuth) return;

  // Clean URL
  window.history.replaceState({}, '', window.location.pathname);

  fetch('/api/auth/debug-token?uid=' + debugAuth, {
    method: 'GET',
    credentials: 'include'
  })
  .then(function(r) { return r.json(); })
  .then(function(data) {
    if (data.success && data.token) {
      localStorage.setItem('auth_token', data.token);
      window.location.reload();
    }
  }).catch(function(){});
})();
</script>
<script>
// Update fee blocks on finance page with real data
(function() {
  function updateFees() {
    if (window.location.pathname.indexOf('/cabinet/finance') !== 0) return;
    var el = document.querySelector('[data-field="personal_bonus"]');
    if (!el || el.getAttribute('data-fees-loaded')) return;

    var token = localStorage.getItem('auth_token');
    fetch('/api/cabinet/fees', {
      method: 'GET',
      headers: {'Content-Type': 'application/json', 'Authorization': token ? 'Bearer ' + token : ''},
      credentials: 'include'
    })
    .then(function(r) { return r.json(); })
    .then(function(data) {
      if (!data.success || !data.fees) return;
      var f = data.fees;
      var fmt = function(n) { return Number(n).toLocaleString('ru-RU'); };

      var pb = document.querySelector('[data-field="personal_bonus"]');
      if (pb) {
        pb.innerHTML = fmt(f.personal_sales) + ' <span style="font-size:14px;font-weight:400;">РУБ.</span>';
        pb.setAttribute('data-fees-loaded', '1');
      }

      var lb = document.querySelector('[data-field="leader_bonus"]');
      if (lb) {
        lb.innerHTML = fmt(f.leader_bonus) + ' <span style="font-size:14px;font-weight:400;">РУБ.</span>';
      }

      var sb = document.querySelector('[data-field="status_bonus"]');
      if (sb) {
        sb.innerHTML = fmt(f.status_bonus) + ' <span style="font-size:14px;font-weight:400;">РУБ.</span>';
      }
    }).catch(function(){});
  }
  setInterval(updateFees, 500);
  var _ps = history.pushState;
  history.pushState = function() { _ps.apply(history, arguments); setTimeout(updateFees, 300); };
  window.addEventListener('popstate', function() { setTimeout(updateFees, 300); });
})();
</script>

<script>
(function(){
  function uyb(){
    if(window.location.pathname.indexOf("/cabinet/finance")!==0)return;
    if(document.querySelector("[data-yearly-done]"))return;
    var all=document.querySelectorAll("div");
    var parent=null;
    for(var i=0;i<all.length;i++){
      if(all[i].children.length===2
        &&all[i].children[0].tagName==="DIV"
        &&all[i].children[0].textContent.indexOf("Общая сумма бонусов")!==-1
        &&all[i].children[1].tagName==="DIV"){
        parent=all[i].children[1];
        break;
      }
    }
    if(!parent)return;
    var token=localStorage.getItem("auth_token");
    fetch("/api/cabinet/fees",{method:"GET",headers:{"Content-Type":"application/json","Authorization":token?"Bearer "+token:""},credentials:"include"})
    .then(function(r){return r.json();})
    .then(function(data){
      if(!data.success||!data.fees||!data.fees.yearly_totals)return;
      var yt=data.fees.yearly_totals;
      var mx=0;
      for(var j=0;j<yt.length;j++){if(yt[j].total>mx)mx=yt[j].total;}
      if(mx===0)mx=1;
      var h="";
      for(var j=0;j<yt.length;j++){
        var p=Math.round((yt[j].total/mx)*100);
        if(p<3&&yt[j].total>0)p=3;
        var f=Number(yt[j].total).toLocaleString("ru-RU");
        var mb=j<yt.length-1?"margin-bottom:12px;":"";
        h+="<div style=\"display:flex;align-items:center;gap:10px;"+mb+"\">"
          +"<span style=\"color:#8ab4c8;font-size:12px;width:35px;\">"+yt[j].year+"</span>"
          +"<div style=\"flex:1;height:8px;background:#0d3a5c;border-radius:4px;overflow:hidden;\">"
          +"<div style=\"width:"+p+"%;height:100%;background:linear-gradient(90deg,#3b82a0,#5ba3c0);border-radius:4px;\"></div>"
          +"</div>"
          +"<span style=\"color:#c8dce8;font-size:12px;width:70px;text-align:right;\">"+f+"</span>"
          +"</div>";
      }
      parent.innerHTML=h;
      parent.setAttribute("data-yearly-done","1");
    }).catch(function(){});
  }
  setInterval(uyb,600);
  var ps=history.pushState;
  history.pushState=function(){ps.apply(history,arguments);setTimeout(uyb,400);};
  window.addEventListener("popstate",function(){setTimeout(uyb,400);});
})();
</script>
<script>
(function(){
  function initWithdrawals(){
    if(window.location.pathname.indexOf('/cabinet/finance')!==0)return;
    if(document.querySelector('[data-wd-init]'))return;

    // Find "История выводов" button
    var btn=document.querySelector('[data-action="withdrawals_history"]');
    if(!btn)return;
    btn.setAttribute('data-wd-init','1');

    // Find "Вывод средств" button
    var wdBtn=document.querySelector('[data-action="withdraw"]');

    var token=localStorage.getItem('auth_token');
    var headers={'Content-Type':'application/json','Authorization':token?'Bearer '+token:''};

    // Create withdrawals table (hidden)
    var tbl=document.createElement('div');
    tbl.setAttribute('data-withdrawals-table','');
    tbl.style.cssText='background:#1a4a6e;border:1px solid #2a6a9a;border-radius:6px;overflow:hidden;display:none;margin-top:15px;';
    // Insert after orders table
    var ordersTable=document.querySelector('[data-orders-table]');
    if(ordersTable&&ordersTable.parentNode){
      ordersTable.parentNode.insertBefore(tbl,ordersTable.nextSibling);
    }

    function loadHistory(){
      fetch('/api/cabinet/withdrawals',{method:'GET',headers:headers,credentials:'include'})
      .then(function(r){return r.json();})
      .then(function(data){
        if(!data.success)return;
        var w=data.withdrawals;
        var statusMap={0:'В обработке',1:'Одобрено',2:'Отклонено'};
        var statusColor={0:'#f0ad4e',1:'#5cb85c',2:'#d9534f'};
        var h='<div style="background:#1e5885;padding:12px 15px;display:flex;justify-content:space-between;align-items:center;">'
          +'<span style="color:#a8d4e5;font-size:14px;">История выводов</span>'
          +'<button data-close-wd style="background:#2a6a9a;border:none;width:24px;height:24px;border-radius:4px;color:#a8d4e5;cursor:pointer;font-size:14px;">✕</button>'
          +'</div>';
        h+='<table style="width:100%;border-collapse:collapse;"><thead><tr style="background:#1e5885;">'
          +'<th style="color:#a8d4e5;font-size:12px;font-weight:500;padding:10px 12px;text-align:left;border-bottom:1px solid #2a6a9a;">№</th>'
          +'<th style="color:#a8d4e5;font-size:12px;font-weight:500;padding:10px 12px;text-align:left;border-bottom:1px solid #2a6a9a;">Дата</th>'
          +'<th style="color:#a8d4e5;font-size:12px;font-weight:500;padding:10px 12px;text-align:left;border-bottom:1px solid #2a6a9a;">Сумма</th>'
          +'<th style="color:#a8d4e5;font-size:12px;font-weight:500;padding:10px 12px;text-align:left;border-bottom:1px solid #2a6a9a;">Комиссия</th>'
          +'<th style="color:#a8d4e5;font-size:12px;font-weight:500;padding:10px 12px;text-align:left;border-bottom:1px solid #2a6a9a;">Способ</th>'
          +'<th style="color:#a8d4e5;font-size:12px;font-weight:500;padding:10px 12px;text-align:left;border-bottom:1px solid #2a6a9a;">Перевод</th>'
          +'<th style="color:#a8d4e5;font-size:12px;font-weight:500;padding:10px 12px;text-align:left;border-bottom:1px solid #2a6a9a;">Статус</th>'
          +'</tr></thead><tbody>';
        if(w.length===0){
          h+='<tr><td colspan="7" style="color:#8ab4c8;font-size:13px;padding:15px;text-align:center;">Нет выводов</td></tr>';
        }
        for(var i=0;i<w.length;i++){
          var d=w[i].created_at?w[i].created_at.substring(0,10).split('-').reverse().join('.'):'';
          var amt=Number(w[i].total_amount).toLocaleString('ru-RU');
          var com=w[i].comission+'%';
          var st=statusMap[w[i].status]||'Неизвестно';
          var sc=statusColor[w[i].status]||'#c8dce8';
          // Extract transfer uid if present
          var transferInfo='-';
          if(w[i].type==='Перевести'){transferInfo='Да';}
          var bdr=i<w.length-1?'border-bottom:1px solid #2a6a9a;':'';
          h+='<tr>'
            +'<td style="color:#c8dce8;font-size:13px;padding:10px 12px;'+bdr+'">'+w[i].id+'</td>'
            +'<td style="color:#c8dce8;font-size:13px;padding:10px 12px;'+bdr+'">'+d+'</td>'
            +'<td style="color:#c8dce8;font-size:13px;padding:10px 12px;'+bdr+'">'+amt+' руб.</td>'
            +'<td style="color:#c8dce8;font-size:13px;padding:10px 12px;'+bdr+'">'+com+'</td>'
            +'<td style="color:#c8dce8;font-size:13px;padding:10px 12px;'+bdr+'">'+w[i].type+'</td>'
            +'<td style="color:#c8dce8;font-size:13px;padding:10px 12px;'+bdr+'">'+transferInfo+'</td>'
            +'<td style="color:'+sc+';font-size:13px;padding:10px 12px;'+bdr+'">'+st+'</td>'
            +'</tr>';
        }
        h+='</tbody></table>';
        tbl.innerHTML=h;
        var closeBtn=tbl.querySelector('[data-close-wd]');
        if(closeBtn){closeBtn.addEventListener('click',function(){tbl.style.display='none';});}
      }).catch(function(){});
    }

    btn.addEventListener('click',function(){
      tbl.style.display=tbl.style.display==='none'?'block':'none';
      if(tbl.style.display==='block')loadHistory();
    });

    // Withdraw button handler
    if(wdBtn){
      wdBtn.addEventListener('click',function(){
        // Load ways and show modal
        fetch('/api/cabinet/withdrawals',{method:'GET',headers:headers,credentials:'include'})
        .then(function(r){return r.json();})
        .then(function(data){
          if(!data.success)return;
          var ways=data.ways;
          var bal=data.balance;
          var com=data.comission;
          var minAmt=data.min_amount;

          // Build modal
          var overlay=document.createElement('div');
          overlay.style.cssText='position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);z-index:10000;display:flex;align-items:center;justify-content:center;';

          var opts='';
          for(var i=0;i<ways.length;i++){
            opts+='<option value="'+ways[i].id+'">'+ways[i].title+'</option>';
          }

          var modal='<div style="background:#1a4a6e;border:1px solid #2a6a9a;border-radius:8px;padding:25px;width:380px;position:relative;">'
            +'<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">'
            +'<span style="color:white;font-size:18px;font-weight:600;">Вывод средств</span>'
            +'<button data-wd-close style="background:none;border:none;color:#a8d4e5;font-size:20px;cursor:pointer;">✕</button>'
            +'</div>'
            +'<div style="margin-bottom:15px;"><label style="color:#a8d4e5;font-size:13px;display:block;margin-bottom:5px;">Укажите ID пользователя:</label>'
            +'<input data-wd-uid type="text" value="'+data.withdrawals.length+'" style="width:100%;padding:10px;background:#0d3a5c;border:1px solid #2a6a9a;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;" readonly></div>'
            +'<div style="margin-bottom:15px;"><label style="color:#a8d4e5;font-size:13px;display:block;margin-bottom:5px;">Выберите способ вывода:</label>'
            +'<select data-wd-way style="width:100%;padding:10px;background:#0d3a5c;border:1px solid #2a6a9a;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;">'+opts+'</select></div>'
            +'<div style="margin-bottom:5px;color:#a8d4e5;font-size:12px;">комиссия за вывод составляет '+com+'%</div>'
            +'<div style="margin-bottom:15px;"><label style="color:#a8d4e5;font-size:13px;display:block;margin-bottom:5px;">Сумма на вывод, руб:</label>'
            +'<input data-wd-amount type="number" min="'+minAmt+'" style="width:100%;padding:10px;background:#0d3a5c;border:1px solid #2a6a9a;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;"></div>'
            +'<div style="margin-bottom:15px;color:#8ab4c8;font-size:12px;">минимальная сумма вывода '+minAmt+' руб.</div>'
            +'<div data-wd-transfer style="margin-bottom:15px;display:none;"><label style="color:#a8d4e5;font-size:13px;display:block;margin-bottom:5px;">ID пользователя для перевода:</label>'
            +'<input data-wd-transfer-uid type="text" style="width:100%;padding:10px;background:#0d3a5c;border:1px solid #2a6a9a;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;"></div>'
            +'<div data-wd-error style="color:#d9534f;font-size:13px;margin-bottom:10px;display:none;"></div>'
            +'<div style="display:flex;gap:10px;">'
            +'<button data-wd-submit style="flex:1;background:#3bb4c1;color:white;font-size:13px;font-weight:500;padding:12px;border:none;border-radius:6px;cursor:pointer;text-transform:uppercase;letter-spacing:1px;">ВЫВЕСТИ</button>'
            +'<button data-wd-cancel style="flex:1;background:#1a4a6e;color:#a8d4e5;font-size:13px;font-weight:500;padding:12px;border:1px solid #2a6a9a;border-radius:6px;cursor:pointer;text-transform:uppercase;letter-spacing:1px;">ОТМЕНА</button>'
            +'</div></div>';

          overlay.innerHTML=modal;
          document.body.appendChild(overlay);

          var waySelect=overlay.querySelector('[data-wd-way]');
          var transferBlock=overlay.querySelector('[data-wd-transfer]');
          waySelect.addEventListener('change',function(){
            transferBlock.style.display=waySelect.options[waySelect.selectedIndex].text==='Перевести'?'block':'none';
          });

          overlay.querySelector('[data-wd-close]').addEventListener('click',function(){document.body.removeChild(overlay);});
          overlay.querySelector('[data-wd-cancel]').addEventListener('click',function(){document.body.removeChild(overlay);});
          overlay.addEventListener('click',function(e){if(e.target===overlay)document.body.removeChild(overlay);});

          overlay.querySelector('[data-wd-submit]').addEventListener('click',function(){
            var amt=parseFloat(overlay.querySelector('[data-wd-amount]').value)||0;
            var wayId=parseInt(waySelect.value);
            var transferUid=overlay.querySelector('[data-wd-transfer-uid]').value||'';
            var errEl=overlay.querySelector('[data-wd-error]');

            fetch('/api/cabinet/withdrawals',{
              method:'POST',
              headers:headers,
              credentials:'include',
              body:JSON.stringify({amount:amt,way_id:wayId,transfer_uid:transferUid})
            })
            .then(function(r){return r.json();})
            .then(function(res){
              if(res.success){
                document.body.removeChild(overlay);
                alert('Заявка на вывод создана');
              }else{
                errEl.textContent=res.error||'Ошибка';
                errEl.style.display='block';
              }
            }).catch(function(){errEl.textContent='Ошибка сети';errEl.style.display='block';});
          });
        }).catch(function(){});
      });
    }
  }

  setInterval(initWithdrawals,600);
  var ps=history.pushState;
  history.pushState=function(){ps.apply(history,arguments);setTimeout(initWithdrawals,400);};
  window.addEventListener('popstate',function(){setTimeout(initWithdrawals,400);});
})();
</script>
</head>

  <body>
    <div id=root></div>
  </body>
</html>
</body>
</html>
<script>
(function(){
var FOOTER_HTML='<div class="flex items-center justify-between" data-content-footer="true" data-ultra-footer="true" style="position: fixed !important; bottom: 20px !important; left: 89px !important; right: 15px !important; display: flex !important; align-items: center !important; justify-content: space-between !important; visibility: visible !important; opacity: 1 !important; z-index: 9999 !important; background-color: transparent !important; pointer-events: auto !important;"><span class="text-[#95b5de] text-base">2019 © ООО Албикс. Все права защищены.</span><div class="flex items-center gap-[8px]"><a href="#" class="w-[32px] h-[32px] rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors"><img src="/assets/social_yt-D-OAslMW.png" alt="YouTube" class="w-[20px] h-[20px] object-contain"></a><a href="#" class="w-[32px] h-[32px] rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors"><img src="/assets/social_vk-DVhhSvRr.png" alt="VK" class="w-[18px] h-[18px] object-contain"></a><a href="#" class="w-[32px] h-[32px] rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors"><img src="/assets/social_inst-Be0b4DfN.png" alt="Instagram" class="w-[20px] h-[20px] object-contain"></a><a href="#" class="w-[32px] h-[32px] rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors"><img src="/assets/social_ok-1imOTysm.png" alt="OK" class="w-[20px] h-[20px] object-contain"></a></div></div>';
function ULTRA_FOOTER(){
var p=location.pathname;
if(p.indexOf('/cabinet/cashback')===-1 && p.indexOf('/cabinet/photo')===-1 && p.indexOf('/cabinet/info')===-1 && p.indexOf('/cabinet/news')===-1)return;
if(document.querySelector('[data-ultra-footer]'))return;
document.querySelectorAll('[data-content-footer],[data-footer-unified]').forEach(function(e){e.remove();});
document.body.insertAdjacentHTML('beforeend',FOOTER_HTML);
}
setInterval(ULTRA_FOOTER,20);
new MutationObserver(ULTRA_FOOTER).observe(document,{childList:true,subtree:true});
document.addEventListener('DOMContentLoaded',ULTRA_FOOTER);
window.addEventListener('load',ULTRA_FOOTER);
ULTRA_FOOTER();
})();
</script>
<script>
(function(){
function FIX_NEWS_DATE(){
if(location.pathname.indexOf('/cabinet/news')===-1)return;
var headers=document.querySelectorAll('.grid.grid-cols-2 .bg-\[\#1e5885\]');
headers.forEach(function(h){
if(h.getAttribute('data-fixed-date'))return;
h.style.cssText='position:sticky!important;top:0!important;z-index:10!important;';
h.setAttribute('data-fixed-date','true');
});
}
setInterval(FIX_NEWS_DATE,50);
new MutationObserver(FIX_NEWS_DATE).observe(document,{childList:true,subtree:true});
FIX_NEWS_DATE();
})();
</script>
<script>
(function(){
function ULTRA_FIX_NEWS_DATE(){
if(location.pathname.indexOf('/cabinet/news')===-1)return;
var cards=document.querySelectorAll('.grid.grid-cols-2 > .rounded-lg');
cards.forEach(function(card){
if(card.getAttribute('data-ultra-fixed'))return;
var dateHeader=card.querySelector('.bg-\[\#1e5885\]');
if(!dateHeader)return;
dateHeader.style.position='sticky';
dateHeader.style.top='0';
dateHeader.style.zIndex='100';
dateHeader.style.flexShrink='0';
card.style.display='flex';
card.style.flexDirection='column';
card.setAttribute('data-ultra-fixed','true');
var content=document.createElement('div');
content.style.cssText='flex:1;overflow-y:auto;';
while(card.children.length>1){
content.appendChild(card.children[1]);
}
card.appendChild(content);
});
}
setInterval(ULTRA_FIX_NEWS_DATE,30);
new MutationObserver(ULTRA_FIX_NEWS_DATE).observe(document,{childList:true,subtree:true});
for(var i=0;i<3000;i+=30)setTimeout(ULTRA_FIX_NEWS_DATE,i);
})();
</script>
<script>
(function(){
function MEGA_FIX_DATE(){
if(location.pathname.indexOf('/cabinet/news')===-1)return;
var cards=document.querySelectorAll('.grid.grid-cols-2 > .rounded-lg');
cards.forEach(function(card){
var dateHeader=card.querySelector('.bg-\[\#1e5885\]');
if(!dateHeader)return;
card.style.position='relative';
dateHeader.style.cssText='position:absolute!important;top:0!important;left:0!important;right:0!important;z-index:100!important;';
});
}
setInterval(MEGA_FIX_DATE,20);
new MutationObserver(MEGA_FIX_DATE).observe(document,{childList:true,subtree:true});
MEGA_FIX_DATE();
})();
</script>
<script>
(function(){
function FORCE_DATE_TOP(){
if(location.pathname.indexOf('/cabinet/news')===-1)return;
var all=document.querySelectorAll('.bg-\[\#1e5885\]');
for(var i=0;i<all.length;i++){
var el=all[i];
if(el.querySelector('svg')){
el.style.cssText='position:sticky!important;top:0!important;left:0!important;right:0!important;z-index:9999!important;background:#1e5885!important;';
}
}
}
setInterval(FORCE_DATE_TOP,10);
FORCE_DATE_TOP();
})();
</script>
<script>
(function(){
var SUPPORT_FORM_HTML = '<div style="position:fixed;right:25px;top:120px;z-index:10;"><div class="w-[185px] flex flex-col gap-2" style="width:185px;display:flex;flex-direction:column;gap:8px;"><div style="background:#246393;border-radius:6px;padding:16px;display:flex;flex-direction:column;align-items:center;"><div style="width:145px;height:145px;background:#1f5986;border-radius:6px;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;"><img src="/assets/camera-Bca7ToUt.png" alt="" style="width:40px;height:40px;margin-bottom:8px;opacity:0.7;"><span style="color:#92aec4;font-size:13px;">Загрузить свое</span><span style="color:#97b1c6;font-size:14px;">фото</span></div><div style="background:#1f5986;border:1px solid #286ea3;border-radius:6px;height:31px;width:100%;margin-top:16px;display:flex;align-items:center;justify-content:center;"><span style="color:#98b2c7;font-size:13px;" data-support-uid>ID 4586</span></div><div style="text-align:center;margin-top:16px;"><div style="color:#a8c8e4;font-size:15px;" data-support-name>Иванов Иван</div><div style="color:#a8c7e4;font-size:16px;font-weight:300;" data-support-surname>Иванович</div></div></div><div style="background:#246393;border-radius:6px;padding:16px;"><div style="background:#1f5986;border:1px solid #2a75a4;border-radius:6px;height:31px;display:flex;align-items:center;justify-content:center;margin-bottom:8px;"><span style="color:#9ab4c8;font-size:12px;">Статус</span></div><div style="text-align:center;color:#a1c5e2;font-size:13px;" data-support-status>Отсутствует</div></div></div></div><div style="display:flex;flex-direction:column;align-items:center;padding:20px 0;width:100%;">  <h1 style="color:white;font-size:28px;font-weight:600;margin-bottom:30px;font-family:Inter,sans-serif;">Техподдержка</h1>  <div style="background:#1a4a6e;border-radius:8px;width:500px;max-width:90%;box-shadow:0 4px 15px rgba(0,0,0,0.3);">    <div style="background:#1e5885;padding:15px 20px;border-radius:8px 8px 0 0;">      <span style="color:#a8d4e5;font-size:16px;font-family:Inter,sans-serif;">Обращение в службу поддержки</span>    </div>    <div style="padding:20px;">      <div style="margin-bottom:15px;">        <label style="color:white;font-size:14px;display:block;margin-bottom:8px;font-family:Inter,sans-serif;">Тема обращения</label>        <input type="text" placeholder="Введите тему сообщения" style="width:100%;padding:12px 15px;background:#1e5885;border:1px solid #2a6a9a;border-radius:4px;color:#a8d4e5;font-size:14px;font-family:Inter,sans-serif;box-sizing:border-box;outline:none;">      </div>      <div style="margin-bottom:15px;">        <label style="color:white;font-size:14px;display:block;margin-bottom:8px;font-family:Inter,sans-serif;">Номер телефона</label>        <input type="text" placeholder="+7 ()" style="width:100%;padding:12px 15px;background:#1e5885;border:1px solid #2a6a9a;border-radius:4px;color:#a8d4e5;font-size:14px;font-family:Inter,sans-serif;box-sizing:border-box;outline:none;">      </div>      <div style="margin-bottom:15px;">        <label style="color:white;font-size:14px;display:block;margin-bottom:8px;font-family:Inter,sans-serif;">E-mail для обратной связи</label>        <input type="email" placeholder="albixe@mail.com" style="width:100%;padding:12px 15px;background:#1e5885;border:1px solid #2a6a9a;border-radius:4px;color:#a8d4e5;font-size:14px;font-family:Inter,sans-serif;box-sizing:border-box;outline:none;">      </div>      <div style="margin-bottom:20px;">        <label style="color:white;font-size:14px;display:block;margin-bottom:8px;font-family:Inter,sans-serif;">Текст обращения</label>        <textarea placeholder="" style="width:100%;height:120px;padding:12px 15px;background:#1e5885;border:1px solid #2a6a9a;border-radius:4px;color:#a8d4e5;font-size:14px;font-family:Inter,sans-serif;box-sizing:border-box;outline:none;resize:none;"></textarea>      </div>      <div style="text-align:center;">        <button style="background:#3bb4c1;color:white;font-size:14px;font-weight:600;padding:15px 60px;border:none;border-radius:6px;cursor:pointer;font-family:Inter,sans-serif;text-transform:uppercase;letter-spacing:1px;">Отправить сообщение</button>      </div>    </div>  </div></div>';

function INJECT_SUPPORT_FORM(){
  if(location.pathname.indexOf('/cabinet/support')===-1)return;
  var existing=document.querySelector('[data-support-form-injected]');
  if(existing)return;
  var main=document.querySelector('main');
  if(!main)return;
  var h1=main.querySelector('h1');
  if(h1 && h1.textContent.indexOf('разработке')!==-1){
    var container=h1.closest('.flex');
    if(container){
      container.innerHTML=SUPPORT_FORM_HTML;
      container.setAttribute('data-support-form-injected','true');
      container.style.cssText='display:flex!important;flex-direction:column!important;align-items:center!important;justify-content:flex-start!important;padding-top:20px!important;';
    }
  }
}
setInterval(INJECT_SUPPORT_FORM,50);
new MutationObserver(INJECT_SUPPORT_FORM).observe(document,{childList:true,subtree:true});
for(var i=0;i<3000;i+=50)setTimeout(INJECT_SUPPORT_FORM,i);
})();
</script>
<script>
(function(){
var WITHDRAW_MODAL_HTML='<div data-withdraw-overlay style="display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);z-index:10000;justify-content:center;align-items:center;"><div style="background:#1a4a6e;border-radius:8px;width:400px;max-width:90%;box-shadow:0 4px 20px rgba(0,0,0,0.4);"><div style="background:#1e5885;padding:15px 20px;border-radius:8px 8px 0 0;display:flex;justify-content:space-between;align-items:center;"><span style="color:white;font-size:16px;font-weight:500;">Вывод средств</span><button data-close-modal style="background:transparent;border:none;color:#a8d4e5;font-size:20px;cursor:pointer;width:28px;height:28px;display:flex;align-items:center;justify-content:center;">✕</button></div><div style="padding:20px;"><div style="margin-bottom:15px;"><label style="color:#a8d4e5;font-size:13px;display:block;margin-bottom:8px;">Укажите ID пользователя</label><input type="text" data-field="user_id" value="119823345" style="width:100%;padding:12px 15px;background:#1e5885;border:1px solid #2a6a9a;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="margin-bottom:15px;"><label style="color:#a8d4e5;font-size:13px;display:block;margin-bottom:8px;">Выберете способ вывода:</label><div style="position:relative;"><select data-field="withdrawal_method" style="width:100%;padding:12px 15px;background:#1e5885;border:1px solid #2a6a9a;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;appearance:none;-webkit-appearance:none;cursor:pointer;"><option value="transfer">Перевести</option><option value="card">На карту</option><option value="crypto">Криптовалюта</option></select><div style="position:absolute;right:15px;top:50%;transform:translateY(-50%);pointer-events:none;color:#a8d4e5;">▼</div></div><div style="color:#7db4d4;font-size:12px;margin-top:6px;">комиссия за вывод составляет 4%</div></div><div style="margin-bottom:20px;"><label style="color:#a8d4e5;font-size:13px;display:block;margin-bottom:8px;">Сумма на вывода, руб.:</label><input type="number" data-field="withdrawal_amount" value="500" min="500" style="width:100%;padding:12px 15px;background:#1e5885;border:1px solid #2a6a9a;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"><div style="color:#7db4d4;font-size:12px;margin-top:6px;">минимальная сумма вывода 500 руб.</div></div><div style="display:flex;gap:15px;"><button data-action="submit_withdrawal" style="flex:1;background:#3bb4c1;color:white;font-size:14px;font-weight:600;padding:14px 20px;border:none;border-radius:4px;cursor:pointer;text-transform:uppercase;">Вывести</button><button data-cancel-modal style="flex:1;background:#1e5885;color:#a8d4e5;font-size:14px;font-weight:600;padding:14px 20px;border:1px solid #2a6a9a;border-radius:4px;cursor:pointer;text-transform:uppercase;">Отмена</button></div></div></div></div>';

function INJECT_MODAL(){
var p=location.pathname;
if(p!=='/cabinet/finance'&&p!=='/cabinet/finance/')return;
if(document.querySelector('[data-withdraw-overlay]'))return;
var body=document.body;
if(!body)return;
var modalContainer=document.createElement('div');
modalContainer.innerHTML=WITHDRAW_MODAL_HTML;
body.appendChild(modalContainer.firstChild);
}

function BIND_MODAL_EVENTS(){
var p=location.pathname;
if(p!=='/cabinet/finance'&&p!=='/cabinet/finance/')return;

var overlay=document.querySelector('[data-withdraw-overlay]');
if(!overlay)return;

var withdrawBtn=document.querySelector('[data-action="withdraw"]');
if(withdrawBtn&&!withdrawBtn.hasAttribute('data-modal-bound')){
withdrawBtn.setAttribute('data-modal-bound','1');
withdrawBtn.addEventListener('click',function(e){
e.preventDefault();
e.stopPropagation();
overlay.style.display='flex';
});
}

var closeBtn=overlay.querySelector('[data-close-modal]');
if(closeBtn&&!closeBtn.hasAttribute('data-modal-bound')){
closeBtn.setAttribute('data-modal-bound','1');
closeBtn.addEventListener('click',function(e){
e.preventDefault();
overlay.style.display='none';
});
}

var cancelBtn=overlay.querySelector('[data-cancel-modal]');
if(cancelBtn&&!cancelBtn.hasAttribute('data-modal-bound')){
cancelBtn.setAttribute('data-modal-bound','1');
cancelBtn.addEventListener('click',function(e){
e.preventDefault();
overlay.style.display='none';
});
}

if(!overlay.hasAttribute('data-overlay-bound')){
overlay.setAttribute('data-overlay-bound','1');
overlay.addEventListener('click',function(e){
if(e.target===overlay){
overlay.style.display='none';
}
});
}

var submitBtn=overlay.querySelector('[data-action="submit_withdrawal"]');
if(submitBtn&&!submitBtn.hasAttribute('data-modal-bound')){
submitBtn.setAttribute('data-modal-bound','1');
submitBtn.addEventListener('click',function(e){
e.preventDefault();
var userId=overlay.querySelector('[data-field="user_id"]').value;
var method=overlay.querySelector('[data-field="withdrawal_method"]').value;
var amount=overlay.querySelector('[data-field="withdrawal_amount"]').value;
console.log('Withdrawal request:',{user_id:userId,method:method,amount:amount});
alert('Заявка на вывод отправлена!\nID: '+userId+'\nСумма: '+amount+' руб.');
overlay.style.display='none';
});
}
}

setInterval(INJECT_MODAL,50);
setInterval(BIND_MODAL_EVENTS,100);
new MutationObserver(function(){INJECT_MODAL();BIND_MODAL_EVENTS();}).observe(document,{childList:true,subtree:true});
for(var i=0;i<5000;i+=50)setTimeout(INJECT_MODAL,i);
for(var i=0;i<5000;i+=100)setTimeout(BIND_MODAL_EVENTS,i);
})();
</script>
<script>
(function(){
function MOVE_WITHDRAW_BTN(){
var p=location.pathname;
if(p!=='/cabinet/finance'&&p!=='/cabinet/finance/')return;

var withdrawBtn=document.querySelector('[data-action="withdraw"]');
if(!withdrawBtn)return;
if(withdrawBtn.hasAttribute('data-moved'))return;

var historyBtnsContainer=document.querySelector('[data-action="withdrawals_history"]');
if(!historyBtnsContainer){
historyBtnsContainer=document.querySelector('[data-open-orders]');
}
if(!historyBtnsContainer)return;

var btnContainer=historyBtnsContainer.parentElement;
if(!btnContainer)return;

withdrawBtn.setAttribute('data-moved','1');
withdrawBtn.style.cssText='background:#3bb4c1;color:white;font-size:13px;font-weight:500;padding:12px 20px;border:none;border-radius:6px;cursor:pointer;text-transform:uppercase;letter-spacing:1px;width:100%;';

btnContainer.appendChild(withdrawBtn);
}

setInterval(MOVE_WITHDRAW_BTN,50);
new MutationObserver(MOVE_WITHDRAW_BTN).observe(document,{childList:true,subtree:true});
for(var i=0;i<5000;i+=50)setTimeout(MOVE_WITHDRAW_BTN,i);
})();
</script>
<script>
(function(){

/* ===== FINANCE PAGE ===== */
var FINANCE_HTML='<div style="padding:20px 30px;width:100%;max-width:1100px;margin:0 auto;"><h1 style="color:white;font-size:28px;font-weight:600;text-align:center;margin-bottom:25px;font-family:Inter,sans-serif;">Мои финансы</h1><div style="display:flex;gap:20px;margin-bottom:20px;"><div style="flex:1;display:flex;flex-direction:column;gap:15px;"><div style="display:flex;gap:15px;"><div style="flex:1;background:#1a4a6e;border:1px solid #2a6a9a;border-radius:6px;padding:12px 15px;text-align:center;"><div style="color:#7db4d4;font-size:11px;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">За личные продажи</div><div data-field="personal_bonus" style="color:white;font-size:22px;font-weight:600;">10 758 <span style="font-size:14px;font-weight:400;">РУБ.</span></div></div><div style="flex:1;background:#1a4a6e;border:1px solid #2a6a9a;border-radius:6px;padding:12px 15px;text-align:center;"><div style="color:#7db4d4;font-size:11px;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Лидерский бонус</div><div data-field="leader_bonus" style="color:white;font-size:22px;font-weight:600;">10 758 <span style="font-size:14px;font-weight:400;">РУБ.</span></div></div><div style="flex:1;background:#1a4a6e;border:1px solid #2a6a9a;border-radius:6px;padding:12px 15px;text-align:center;"><div style="color:#7db4d4;font-size:11px;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Бонус за статус</div><div data-field="status_bonus" style="color:white;font-size:22px;font-weight:600;">10 758 <span style="font-size:14px;font-weight:400;">РУБ.</span></div></div></div><div data-orders-table style="background:#1a4a6e;border:1px solid #2a6a9a;border-radius:6px;overflow:hidden;display:none;"><div style="background:#1e5885;padding:12px 15px;display:flex;justify-content:space-between;align-items:center;"><span style="color:#a8d4e5;font-size:14px;">История заказов</span><button data-close-orders style="background:#2a6a9a;border:none;width:24px;height:24px;border-radius:4px;color:#a8d4e5;cursor:pointer;font-size:14px;">✕</button></div><table style="width:100%;border-collapse:collapse;"><thead><tr style="background:#1e5885;"><th style="color:#a8d4e5;font-size:12px;font-weight:500;padding:10px 12px;text-align:left;border-bottom:1px solid #2a6a9a;">№</th><th style="color:#a8d4e5;font-size:12px;font-weight:500;padding:10px 12px;text-align:left;border-bottom:1px solid #2a6a9a;">Дата</th><th style="color:#a8d4e5;font-size:12px;font-weight:500;padding:10px 12px;text-align:left;border-bottom:1px solid #2a6a9a;">Статус заказа</th><th style="color:#a8d4e5;font-size:12px;font-weight:500;padding:10px 12px;text-align:left;border-bottom:1px solid #2a6a9a;">Трек номер СДЭК</th></tr></thead><tbody><tr><td style="color:#c8dce8;font-size:13px;padding:10px 12px;border-bottom:1px solid #2a6a9a;">234</td><td style="color:#c8dce8;font-size:13px;padding:10px 12px;border-bottom:1px solid #2a6a9a;">08.09.2025</td><td style="color:#c8dce8;font-size:13px;padding:10px 12px;border-bottom:1px solid #2a6a9a;">Отправлено</td><td style="color:#c8dce8;font-size:13px;padding:10px 12px;border-bottom:1px solid #2a6a9a;">10064302888</td></tr><tr><td style="color:#c8dce8;font-size:13px;padding:10px 12px;">234</td><td style="color:#c8dce8;font-size:13px;padding:10px 12px;">08.09.2025</td><td style="color:#c8dce8;font-size:13px;padding:10px 12px;">В обработке<br><span style="font-size:11px;color:#8ab4c8;">(ждем ответа от производителя)</span></td><td style="color:#c8dce8;font-size:13px;padding:10px 12px;">10064302888</td></tr></tbody></table></div></div><div style="width:320px;display:flex;flex-direction:column;gap:15px;"><div style="background:linear-gradient(135deg,#1a4a6e 0%,#2a6a9a 100%);border-radius:6px;overflow:hidden;position:relative;height:100px;"><img src="https://images.unsplash.com/photo-1561414927-6d86591d0c4f?w=400&h=150&fit=crop" style="position:absolute;right:0;top:0;height:100%;width:60%;object-fit:cover;opacity:0.7;"><div style="position:relative;z-index:1;padding:15px 20px;height:100%;display:flex;flex-direction:column;justify-content:center;"><div style="color:#a8d4e5;font-size:13px;margin-bottom:5px;">Текущий<br>баланс</div><div data-field="current_balance" style="color:white;font-size:32px;font-weight:700;">124 457 <span style="font-size:16px;font-weight:400;">РУБ.</span></div></div></div><div style="background:#1a4a6e;border:1px solid #2a6a9a;border-radius:6px;padding:15px;"><div style="color:#a8d4e5;font-size:13px;margin-bottom:15px;">Общая сумма бонусов по годам, руб</div><div><div style="display:flex;align-items:center;gap:10px;margin-bottom:12px;"><span style="color:#8ab4c8;font-size:12px;width:35px;">2019</span><div style="flex:1;height:8px;background:#0d3a5c;border-radius:4px;overflow:hidden;"><div style="width:100%;height:100%;background:linear-gradient(90deg,#3b82a0,#5ba3c0);border-radius:4px;"></div></div><span style="color:#c8dce8;font-size:12px;width:70px;text-align:right;">1 000 000</span></div><div style="display:flex;align-items:center;gap:10px;margin-bottom:12px;"><span style="color:#8ab4c8;font-size:12px;width:35px;">2019</span><div style="flex:1;height:8px;background:#0d3a5c;border-radius:4px;overflow:hidden;"><div style="width:55%;height:100%;background:linear-gradient(90deg,#3b82a0,#5ba3c0);border-radius:4px;"></div></div><span style="color:#c8dce8;font-size:12px;width:70px;text-align:right;">544 000</span></div><div style="display:flex;align-items:center;gap:10px;"><span style="color:#8ab4c8;font-size:12px;width:35px;">2017</span><div style="flex:1;height:8px;background:#0d3a5c;border-radius:4px;overflow:hidden;"><div style="width:25%;height:100%;background:linear-gradient(90deg,#3b82a0,#5ba3c0);border-radius:4px;"></div></div><span style="color:#c8dce8;font-size:12px;width:70px;text-align:right;">244 450</span></div></div></div><div style="display:flex;flex-direction:column;gap:10px;"><button data-open-orders style="background:#1a4a6e;color:#a8d4e5;font-size:13px;font-weight:500;padding:12px 20px;border:1px solid #2a6a9a;border-radius:6px;cursor:pointer;text-transform:uppercase;letter-spacing:1px;">История заказов</button><button data-action="withdrawals_history" style="background:#1a4a6e;color:#a8d4e5;font-size:13px;font-weight:500;padding:12px 20px;border:1px solid #2a6a9a;border-radius:6px;cursor:pointer;text-transform:uppercase;letter-spacing:1px;">История выводов</button><button data-action="withdraw" style="background:#3bb4c1;color:white;font-size:13px;font-weight:500;padding:12px 20px;border:none;border-radius:6px;cursor:pointer;text-transform:uppercase;letter-spacing:1px;">Вывод средств</button></div></div></div></div>';

function FINANCE_PAGE(){
var p=location.pathname;
if(p!=='/cabinet/finance'&&p!=='/cabinet/finance/')return;
if(document.querySelector('[data-finance-page-ok]'))return;
var root=document.getElementById('root');
if(!root)return;
var container=document.createElement('div');
container.setAttribute('data-finance-page-ok','1');
container.style.cssText='position:absolute;top:60px;left:69px;right:205px;bottom:60px;overflow-y:auto;scrollbar-width:none;-ms-overflow-style:none;';
container.innerHTML=FINANCE_HTML;
root.appendChild(container);
var oldMain=document.querySelector('main');
if(oldMain)oldMain.style.display='none';
}

/* ===== WITHDRAW MODAL ===== */
var WITHDRAW_HTML='<div data-modal-withdraw style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.7);z-index:999999;justify-content:center;align-items:center;"><div style="background:#1a4a6e;border-radius:8px;width:400px;max-width:90%;box-shadow:0 4px 20px rgba(0,0,0,0.4);"><div style="background:#1e5885;padding:15px 20px;border-radius:8px 8px 0 0;display:flex;justify-content:space-between;align-items:center;"><span style="color:white;font-size:16px;font-weight:500;">Вывод средств</span><button data-close-withdraw style="background:transparent;border:none;color:#a8d4e5;font-size:20px;cursor:pointer;">✕</button></div><div style="padding:20px;"><div style="margin-bottom:15px;"><label style="color:#a8d4e5;font-size:13px;display:block;margin-bottom:8px;">Укажите ID пользователя</label><input type="text" data-field="user_id" value="119823345" style="width:100%;padding:12px 15px;background:#1e5885;border:1px solid #2a6a9a;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="margin-bottom:15px;"><label style="color:#a8d4e5;font-size:13px;display:block;margin-bottom:8px;">Выберете способ вывода:</label><div style="position:relative;"><select data-field="withdrawal_method" style="width:100%;padding:12px 15px;background:#1e5885;border:1px solid #2a6a9a;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;appearance:none;cursor:pointer;"><option value="transfer">Перевести</option><option value="card">На карту</option></select><div style="position:absolute;right:15px;top:50%;transform:translateY(-50%);pointer-events:none;color:#a8d4e5;">▼</div></div><div style="color:#7db4d4;font-size:12px;margin-top:6px;">комиссия за вывод составляет 4%</div></div><div style="margin-bottom:20px;"><label style="color:#a8d4e5;font-size:13px;display:block;margin-bottom:8px;">Сумма на вывода, руб.:</label><input type="number" data-field="withdrawal_amount" value="500" style="width:100%;padding:12px 15px;background:#1e5885;border:1px solid #2a6a9a;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"><div style="color:#7db4d4;font-size:12px;margin-top:6px;">минимальная сумма вывода 500 руб.</div></div><div style="display:flex;gap:15px;"><button data-action="submit_withdrawal" style="flex:1;background:#3bb4c1;color:white;font-size:14px;font-weight:600;padding:14px;border:none;border-radius:4px;cursor:pointer;text-transform:uppercase;">Вывести</button><button data-cancel-withdraw style="flex:1;background:#1e5885;color:#a8d4e5;font-size:14px;font-weight:600;padding:14px;border:1px solid #2a6a9a;border-radius:4px;cursor:pointer;text-transform:uppercase;">Отмена</button></div></div></div></div>';

function INJECT_WITHDRAW_MODAL(){
if(document.querySelector('[data-modal-withdraw]'))return;
document.body.insertAdjacentHTML('beforeend',WITHDRAW_HTML);
}

/* ===== WHOLESALE MODAL ===== */
var WHOLESALE_HTML='<div data-modal-wholesale style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.7);z-index:999999;justify-content:center;align-items:center;"><div style="background:#1a4a6e;border-radius:8px;width:420px;max-width:90%;max-height:85vh;overflow-y:auto;box-shadow:0 4px 20px rgba(0,0,0,0.4);scrollbar-width:none;-ms-overflow-style:none;"><div style="background:#3bb4c1;padding:15px 20px;border-radius:8px 8px 0 0;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:1;"><span style="color:white;font-size:16px;font-weight:500;">Заказать оптом</span><button data-close-wholesale style="background:transparent;border:none;color:white;font-size:20px;cursor:pointer;">✕</button></div><div style="padding:20px;"><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Название Организации</label><input type="text" data-field="organization_name" placeholder="Название Организации" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">ФИО</label><input type="text" data-field="full_name" placeholder="ФИО" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Адрес</label><input type="text" data-field="address" placeholder="Адрес" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Телефон</label><input type="text" data-field="phone" placeholder="+7()" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Email</label><input type="email" data-field="email" placeholder="Email" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Выберите товар</label><div style="position:relative;"><select data-field="product" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;appearance:none;cursor:pointer;"><option value="vga-90">ВГА-90</option><option value="vga-60">ВГА-60</option><option value="vga-30">ВГА-30</option></select><div style="position:absolute;right:15px;top:50%;transform:translateY(-50%);pointer-events:none;color:white;">▼</div></div></div><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Количество</label><div style="display:flex;align-items:center;background:#1e5885;border-radius:4px;width:fit-content;"><button data-qty-minus style="background:transparent;border:none;color:white;font-size:20px;cursor:pointer;width:44px;height:44px;">−</button><span data-field="quantity" style="color:white;font-size:16px;min-width:30px;text-align:center;">1</span><button data-qty-plus style="background:transparent;border:none;color:white;font-size:20px;cursor:pointer;width:44px;height:44px;">+</button></div></div><div style="margin-bottom:20px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Комментарии</label><input type="text" data-field="comments" placeholder="Комментарии" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><button data-action="submit_wholesale" style="width:100%;background:#3bb4c1;color:white;font-size:14px;font-weight:600;padding:14px;border:none;border-radius:4px;cursor:pointer;text-transform:uppercase;">Отправить</button></div></div></div>';

function INJECT_WHOLESALE_MODAL(){
if(document.querySelector('[data-modal-wholesale]'))return;
document.body.insertAdjacentHTML('beforeend',WHOLESALE_HTML);
}

/* ===== GLOBAL EVENT HANDLERS ===== */
var qtyValue=1;

document.addEventListener('click',function(e){
var t=e.target;

// FINANCE PAGE BUTTONS
if(t.matches('[data-open-orders]')||t.closest('[data-open-orders]')){
var orders=document.querySelector('[data-orders-table]');
if(orders)orders.style.display='block';
return;
}
if(t.matches('[data-close-orders]')||t.closest('[data-close-orders]')){
var orders=document.querySelector('[data-orders-table]');
if(orders)orders.style.display='none';
return;
}

// WITHDRAW MODAL
if(t.matches('[data-action="withdraw"]')||t.closest('[data-action="withdraw"]')){
var modal=document.querySelector('[data-modal-withdraw]');
if(modal)modal.style.display='flex';
return;
}
if(t.matches('[data-close-withdraw]')||t.closest('[data-close-withdraw]')||t.matches('[data-cancel-withdraw]')||t.closest('[data-cancel-withdraw]')){
var modal=document.querySelector('[data-modal-withdraw]');
if(modal)modal.style.display='none';
return;
}

// WHOLESALE MODAL - OPEN
var btn=t.closest('button');
if(btn&&!btn.closest('[data-modal-wholesale]')){
var txt=(btn.textContent||'').toLowerCase();
if(txt.indexOf('заказать')!==-1&&txt.indexOf('оптом')!==-1){
e.preventDefault();
e.stopPropagation();
setTimeout(function(){
var modal=document.querySelector('[data-modal-wholesale]');
if(modal)modal.style.display='flex';
},10);
return;
}
}

// WHOLESALE MODAL - CLOSE
if(t.matches('[data-close-wholesale]')||t.closest('[data-close-wholesale]')){
var modal=document.querySelector('[data-modal-wholesale]');
if(modal)modal.style.display='none';
return;
}

// QUANTITY BUTTONS
if(t.matches('[data-qty-minus]')||t.closest('[data-qty-minus]')){
if(qtyValue>1)qtyValue--;
var span=document.querySelector('[data-modal-wholesale] [data-field="quantity"]');
if(span)span.textContent=qtyValue;
return;
}
if(t.matches('[data-qty-plus]')||t.closest('[data-qty-plus]')){
qtyValue++;
var span=document.querySelector('[data-modal-wholesale] [data-field="quantity"]');
if(span)span.textContent=qtyValue;
return;
}

// CLOSE ON OVERLAY CLICK
if(t.matches('[data-modal-withdraw]')){
t.style.display='none';
return;
}
if(t.matches('[data-modal-wholesale]')){
t.style.display='none';
return;
}
});

/* ===== INIT ===== */
function INFO_PAGE(){
var p=location.pathname;
if(p!=='/cabinet/info'&&p!=='/cabinet/info/')return;
if(document.querySelector('[data-info-loaded]'))return;

// Удалить h1 из main
var mainEl=document.querySelector('main');
if(mainEl){
  var h1s=mainEl.querySelectorAll('h1');
  h1s.forEach(function(h){
    if(h.textContent.indexOf('Информация')!==-1||h.textContent.indexOf('разработке')!==-1){
      h.remove();
    }
  });
}

var root=document.getElementById('root');
if(!root)return;

var container=document.createElement('div');
container.setAttribute('data-info-loaded','1');
container.style.cssText='position:absolute;top:60px;left:69px;right:225px;bottom:60px;overflow-y:auto;padding:30px;z-index:100;scrollbar-width:none;-ms-overflow-style:none;';container.className='hide-scrollbar';
container.innerHTML='<h1 style="text-align:center;font-weight:500;font-size:24px;color:#fff;margin:0 0 30px 0;">Полезная информация</h1><div id="pdf-grid" style="display:flex;flex-wrap:wrap;margin:0 -10px;"><div style="color:white;text-align:center;width:100%;padding:20px;">Загрузка...</div></div>';
root.appendChild(container);

fetch('/get_info_files.php')
.then(function(r){return r.json();})
.then(function(data){
  var grid=document.getElementById('pdf-grid');
  if(!grid)return;
  if(data.success&&data.files&&data.files.length>0){
    grid.innerHTML='';
    data.files.forEach(function(file){
      var col=document.createElement('div');
      col.style.cssText='width:25%;padding:0 10px 20px 10px;box-sizing:border-box;';
      var card=document.createElement('a');
      card.href=file.file;
      card.target='_blank';
      card.style.cssText='display:flex;flex-direction:column;justify-content:space-between;background:#2c3148;border-radius:8px;padding:20px;text-decoration:none;min-height:120px;cursor:pointer;height:100%;transition:background 0.3s;';
      card.onclick=function(e){e.preventDefault();window.open(this.href,'_blank');return false;};
      card.onmouseenter=function(){this.style.background='#292e46';};
      card.onmouseleave=function(){this.style.background='#2c3148';};
      var title=document.createElement('p');
      title.textContent=file.title;
      title.style.cssText='color:#fff;font-size:15px;margin:0 0 10px 0;pointer-events:none;';
      var size=document.createElement('small');
      size.textContent=file.extension+' ('+file.size+' kb)';
      size.style.cssText='color:#7880a0;font-size:14px;pointer-events:none;';
      card.appendChild(title);
      card.appendChild(size);
      col.appendChild(card);
      grid.appendChild(col);
    });
  }else{
    grid.innerHTML='<div style="color:#ff6b6b;text-align:center;width:100%;padding:20px;">Нет файлов</div>';
  }
})
.catch(function(err){
  var grid=document.getElementById('pdf-grid');
  if(grid)grid.innerHTML='<div style="color:#ff6b6b;text-align:center;width:100%;padding:20px;">Ошибка: '+err.message+'</div>';
});
}

function PHOTO_PAGE(){
var p=location.pathname;
if(p!=='/cabinet/photo'&&p!=='/cabinet/photo/')return;
if(document.querySelector('[data-events-loaded]'))return;

var mainEl=document.querySelector('main');
if(mainEl){
  var h1s=mainEl.querySelectorAll('h1');
  h1s.forEach(function(h){
    if(h.textContent.indexOf('Фото')!==-1||h.textContent.indexOf('разработке')!==-1){
      h.remove();
    }
  });
}

var root=document.getElementById('root');
if(!root)return;

var container=document.createElement('div');
container.setAttribute('data-events-loaded','1');
container.style.cssText='position:absolute;top:60px;left:69px;right:225px;bottom:60px;overflow-y:auto;padding:30px;z-index:100;scrollbar-width:none;-ms-overflow-style:none;';container.className='hide-scrollbar';
container.innerHTML='<h1 style="text-align:center;font-weight:500;font-size:24px;color:#fff;margin:0 0 30px 0;">Мероприятия</h1><div id="events-grid" style="display:flex;flex-wrap:wrap;margin:0 -10px;"><div style="color:#a8d4e5;text-align:center;width:100%;padding:20px;">Загрузка...</div></div>';
root.appendChild(container);

fetch('/get_events.php')
.then(function(r){return r.json();})
.then(function(data){
  var grid=document.getElementById('events-grid');
  if(!grid)return;
  if(data.success&&data.events&&data.events.length>0){
    grid.innerHTML='';
    data.events.forEach(function(event){
      var col=document.createElement('div');
      col.style.cssText='width:50%;padding:0 10px 20px 10px;box-sizing:border-box;';

      var card=document.createElement('div');
      card.style.cssText='background:#1a4a6e;border:1px solid #2a6a9a;border-radius:8px;overflow:hidden;height:100%;display:flex;flex-direction:column;';

      var imgWrap=document.createElement('div');
      imgWrap.style.cssText='position:relative;width:100%;height:200px;overflow:hidden;background:#1e5885;';

      var dateSpan=document.createElement('div');
      dateSpan.textContent=event.date;
      dateSpan.style.cssText='position:absolute;top:10px;left:10px;background:rgba(30,88,133,0.95);color:#a8d4e5;padding:6px 12px;border-radius:4px;font-size:12px;z-index:2;border:1px solid #2a6a9a;';

      if(event.image){
        var img=document.createElement('img');
        img.src=event.image;
        img.alt=event.title;
        img.style.cssText='width:100%;height:100%;object-fit:cover;';
        imgWrap.appendChild(img);
      }

      imgWrap.appendChild(dateSpan);

      var content=document.createElement('div');
      content.style.cssText='padding:20px;flex:1;display:flex;flex-direction:column;';

      var title=document.createElement('h3');
      title.textContent=event.title;
      title.style.cssText='color:#fff;font-size:17px;margin:0 0 12px 0;font-weight:500;';

      var text=document.createElement('p');
      text.textContent=event.short_text;
      text.style.cssText='color:#c8dce8;font-size:13px;margin:0 0 15px 0;line-height:1.6;flex:1;';

      var divider=document.createElement('div');
      divider.style.cssText='height:1px;background:#2a6a9a;margin:15px 0;';

      var info=document.createElement('div');
      info.style.cssText='display:flex;justify-content:space-between;align-items:center;';

      var ticketsWrap=document.createElement('div');
      ticketsWrap.style.cssText='';

      var ticketsLabel=document.createElement('div');
      ticketsLabel.style.cssText='color:#7db4d4;font-size:11px;text-transform:uppercase;letter-spacing:0.5px;margin-bottom:5px;';
      ticketsLabel.textContent='Билеты';

      var ticketsInfo=document.createElement('div');
      ticketsInfo.style.cssText='color:#a8d4e5;font-size:12px;';
      ticketsInfo.innerHTML='Всего: <strong style="color:#fff;">'+event.total_tickets+'</strong> • Осталось: <strong style="color:#fff;">'+event.tickets+'</strong>';

      ticketsWrap.appendChild(ticketsLabel);
      ticketsWrap.appendChild(ticketsInfo);

      var buttons=document.createElement('div');
      buttons.style.cssText='display:flex;gap:8px;';

      var buyBtn=document.createElement('button');
      buyBtn.textContent='Купить';
      buyBtn.style.cssText='background:#3bb4c1;color:#fff;border:none;padding:10px 18px;border-radius:4px;cursor:pointer;font-size:13px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;';
      if(event.disbut==='disabled'){
        buyBtn.disabled=true;
        buyBtn.style.background='#3bb4c1';
        buyBtn.style.cursor='not-allowed';
        // opacity removed to keep bright color
      }

      var detailBtn=document.createElement('button');
      detailBtn.textContent='Подробнее';
      detailBtn.style.cssText='background:#1e5885;color:#a8d4e5;border:1px solid #2a6a9a;padding:10px 18px;border-radius:4px;cursor:pointer;font-size:13px;font-weight:500;text-transform:uppercase;letter-spacing:0.5px;';

      buttons.appendChild(buyBtn);
      buttons.appendChild(detailBtn);
      info.appendChild(ticketsWrap);
      info.appendChild(buttons);

      content.appendChild(title);
      content.appendChild(text);
      content.appendChild(divider);
      content.appendChild(info);
      card.appendChild(imgWrap);
      card.appendChild(content);
      col.appendChild(card);
      grid.appendChild(col);
    });
  }else{
    grid.innerHTML='<div style="color:#7db4d4;text-align:center;width:100%;padding:20px;background:#1a4a6e;border:1px solid #2a6a9a;border-radius:8px;">Нет доступных мероприятий</div>';
  }
})
.catch(function(err){
  var grid=document.getElementById('events-grid');
  if(grid)grid.innerHTML='<div style="color:#ff6b6b;text-align:center;width:100%;padding:20px;background:#1a4a6e;border:1px solid #2a6a9a;border-radius:8px;">Ошибка: '+err.message+'</div>';
});
}




function CASHBACK_PAGE(){
var p=location.pathname;
if(p!=='/cabinet/cashback'&&p!=='/cabinet/cashback/')return;
if(document.querySelector('[data-cashback-loaded]'))return;
var mainEl=document.querySelector('main');
if(mainEl){
var h1s=mainEl.querySelectorAll('h1');
h1s.forEach(function(h){if(h.textContent.indexOf('Кэшбэк')!==-1||h.textContent.indexOf('разработке')!==-1){h.remove();}});
}
var root=document.getElementById('root');
if(!root)return;
var container=document.createElement('div');
container.setAttribute('data-cashback-loaded','1');
container.style.cssText='position:absolute;top:60px;left:69px;right:225px;bottom:60px;overflow-y:auto;padding:30px;z-index:100;scrollbar-width:none;-ms-overflow-style:none;';
container.className='hide-scrollbar';
container.innerHTML='<h1 style="text-align:center;font-weight:500;font-size:24px;color:#fff;margin:0 0 30px 0;">Магазин</h1><div id="shop-grid" style="display:flex;flex-wrap:wrap;gap:25px;justify-content:center;"><div style="color:#a8d4e5;text-align:center;width:100%;padding:20px;">Загрузка...</div></div>';
root.appendChild(container);
fetch('/get_shop.php')
.then(function(r){return r.json();})
.then(function(data){
var grid=document.getElementById('shop-grid');
if(!grid)return;
if(data.success&&data.items&&data.items.length>0){
grid.innerHTML='';
data.items.forEach(function(item){
var card=document.createElement('div');
card.style.cssText='width:400px;background:#1a4a6e;border:1px solid #2a6a9a;border-radius:8px;overflow:hidden;box-shadow:0 4px 15px rgba(0,0,0,0.3);cursor:pointer;transition:transform 0.2s;';
card.onmouseenter=function(){this.style.transform='translateY(-5px)';};
card.onmouseleave=function(){this.style.transform='translateY(0)';};
var imgWrap=document.createElement('div');
imgWrap.style.cssText='width:100%;height:250px;background:#1e5885;overflow:hidden;';
if(item.image){
var img=document.createElement('img');
img.src=item.image;
img.alt=item.title;
img.style.cssText='width:100%;height:100%;object-fit:cover;';
imgWrap.appendChild(img);
}
var content=document.createElement('div');
content.style.cssText='padding:20px;';
var title=document.createElement('h3');
title.textContent=item.title;
title.style.cssText='color:#fff;font-size:18px;margin:0 0 15px 0;font-weight:600;font-family:Inter,sans-serif;';
var priceRow=document.createElement('div');
priceRow.style.cssText='display:flex;align-items:center;justify-content:space-between;';
var price=document.createElement('span');
price.textContent=item.price+' ₽';
price.style.cssText='color:#fff;font-size:20px;font-weight:700;font-family:Inter,sans-serif;';
var buyBtn=document.createElement('button');
buyBtn.textContent='Купить';
buyBtn.style.cssText='background:#3bb4c1;color:#fff;border:none;padding:10px 20px;border-radius:4px;cursor:pointer;font-size:14px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;font-family:Inter,sans-serif;';
buyBtn.onclick=function(e){
e.stopPropagation();
alert('Товар: '+item.title+', Цена: '+item.price+' ₽');
};
priceRow.appendChild(price);
priceRow.appendChild(buyBtn);
content.appendChild(title);
content.appendChild(priceRow);
card.appendChild(imgWrap);
card.appendChild(content);
grid.appendChild(card);
});
}else{
grid.innerHTML='<div style="color:#7db4d4;text-align:center;width:100%;padding:20px;background:#1a4a6e;border:1px solid #2a6a9a;border-radius:8px;">Нет товаров</div>';
}
})
.catch(function(err){
var grid=document.getElementById('shop-grid');
if(grid)grid.innerHTML='<div style="color:#ff6b6b;text-align:center;width:100%;padding:20px;background:#1a4a6e;border:1px solid #2a6a9a;border-radius:8px;">Ошибка: '+err.message+'</div>';
});
}



function NEWS_PAGE(){
var p=location.pathname;
if(p!=='/cabinet/news'&&p!=='/cabinet/news/')return;
if(document.querySelector('[data-news-loaded]'))return;

var mainEl=document.querySelector('main');
if(mainEl){
  var h1s=mainEl.querySelectorAll('h1');
  h1s.forEach(function(h){
    if(h.textContent.indexOf('Новости')!==-1||h.textContent.indexOf('разработке')!==-1){
      h.remove();
    }
  });
}

var root=document.getElementById('root');
if(!root)return;

var container=document.createElement('div');
container.setAttribute('data-news-loaded','1');
container.style.cssText='position:absolute;top:60px;left:69px;right:225px;bottom:60px;overflow-y:auto;padding:30px;z-index:100;scrollbar-width:none;-ms-overflow-style:none;';
container.className='hide-scrollbar';
container.innerHTML='<h1 style="text-align:center;font-weight:500;font-size:24px;color:#fff;margin:0 0 30px 0;">Новости</h1><div id="news-grid" style="display:flex;flex-wrap:wrap;gap:25px;width:825px;margin-left:60px;"><div style="color:#a8d4e5;text-align:center;width:100%;padding:20px;">Загрузка...</div></div>';
root.appendChild(container);

fetch('/get_news.php')
.then(function(r){return r.json();})
.then(function(data){
  var grid=document.getElementById('news-grid');
  if(!grid)return;
  if(data.success&&data.news&&data.news.length>0){
    grid.innerHTML='';
    data.news.forEach(function(newsItem){
      var col=document.createElement('div');
      col.style.cssText='width:400px;min-width:400px;box-sizing:border-box;';

      var card=document.createElement('div');
      card.style.cssText='background:#1a4a6e;border:1px solid #2a6a9a;border-radius:8px;overflow:hidden;height:300px;max-height:300px;display:flex;flex-direction:column;box-shadow:0 4px 15px rgba(0,0,0,0.3);';

      // Date header with calendar icon (fixed at top)
      var dateHeader=document.createElement('div');
      dateHeader.style.cssText='background:#1e5885;padding:12px 16px;display:flex;align-items:center;gap:12px;flex-shrink:0;';

      if(newsItem.date){
        var calendarIcon=document.createElement('div');
        calendarIcon.style.cssText='width:20px;height:20px;display:flex;align-items:center;justify-center;';
        calendarIcon.innerHTML='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="2" y="3" width="12" height="11" rx="1.5" stroke="#a8d4e5" stroke-width="1.5" fill="none"/><line x1="2" y1="6" x2="14" y2="6" stroke="#a8d4e5" stroke-width="1.5"/><line x1="5" y1="1" x2="5" y2="4" stroke="#a8d4e5" stroke-width="1.5" stroke-linecap="round"/><line x1="11" y1="1" x2="11" y2="4" stroke="#a8d4e5" stroke-width="1.5" stroke-linecap="round"/></svg>';

        var dateText=document.createElement('span');
        dateText.textContent=newsItem.date;
        dateText.style.cssText='color:#a8d4e5;font-size:13px;font-family:Inter,sans-serif;';

        dateHeader.appendChild(calendarIcon);
        dateHeader.appendChild(dateText);
      }

      card.appendChild(dateHeader);

      // Scrollable wrapper for image + content
      var scrollWrapper=document.createElement('div');
      scrollWrapper.style.cssText='flex:1;overflow-y:auto;scrollbar-width:none;-ms-overflow-style:none;';
      scrollWrapper.className='hide-scrollbar';

      // Image section
      var imgWrap=document.createElement('div');
      imgWrap.style.cssText='width:100%;min-height:150px;background:#1e5885;';

      if(newsItem.image){
        var img=document.createElement('img');
        img.src=newsItem.image;
        img.alt=newsItem.title;
        img.style.cssText='width:100%;height:100%;object-fit:cover;';
        imgWrap.appendChild(img);
      }

      scrollWrapper.appendChild(imgWrap);

      // Content section
      var content=document.createElement('div');
      content.style.cssText='background:#2a6a9a;padding:20px;';

      // Title
      var title=document.createElement('h3');
      title.textContent=newsItem.title;
      title.style.cssText='color:#fff;font-size:18px;margin:0 0 12px 0;font-weight:600;font-family:Inter,sans-serif;';

      // Text
      var text=document.createElement('p');
      var shortText=newsItem.short_text||'';
      if(!shortText&&newsItem.text){
        var tempDiv=document.createElement('div');
        tempDiv.innerHTML=newsItem.text;
        shortText=tempDiv.textContent||tempDiv.innerText||'';
        if(shortText.length>150){
          shortText=shortText.substring(0,150)+'...';
        }
      }
      text.textContent=shortText;
      text.style.cssText='color:#fff;font-size:14px;margin:0;line-height:1.6;font-family:Inter,sans-serif;';

      content.appendChild(title);
      content.appendChild(text);
      
      scrollWrapper.appendChild(content);
      card.appendChild(scrollWrapper);

      col.appendChild(card);
      grid.appendChild(col);
    });
  }else{
    grid.innerHTML='<div style="color:#7db4d4;text-align:center;width:100%;padding:20px;background:#1a4a6e;border:1px solid #2a6a9a;border-radius:8px;">Нет новостей</div>';
  }
})
.catch(function(err){
  var grid=document.getElementById('news-grid');
  if(grid)grid.innerHTML='<div style="color:#ff6b6b;text-align:center;width:100%;padding:20px;background:#1a4a6e;border:1px solid #2a6a9a;border-radius:8px;">Ошибка: '+err.message+'</div>';
});
}




function CASHBACK_PAGE(){
var p=location.pathname;
if(p!=='/cabinet/cashback'&&p!=='/cabinet/cashback/')return;
if(document.querySelector('[data-cashback-loaded]'))return;
var mainEl=document.querySelector('main');
if(mainEl){
var h1s=mainEl.querySelectorAll('h1');
h1s.forEach(function(h){if(h.textContent.indexOf('Кэшбэк')!==-1||h.textContent.indexOf('разработке')!==-1){h.remove();}});
}
var root=document.getElementById('root');
if(!root)return;
var container=document.createElement('div');
container.setAttribute('data-cashback-loaded','1');
container.style.cssText='position:absolute;top:60px;left:69px;right:225px;bottom:60px;overflow-y:auto;padding:30px;z-index:100;scrollbar-width:none;-ms-overflow-style:none;';
container.className='hide-scrollbar';
container.innerHTML='<h1 style="text-align:center;font-weight:500;font-size:24px;color:#fff;margin:0 0 30px 0;">Магазин</h1><div id="shop-grid" style="display:flex;flex-wrap:wrap;gap:25px;justify-content:center;"><div style="color:#a8d4e5;text-align:center;width:100%;padding:20px;">Загрузка...</div></div>';
root.appendChild(container);
fetch('/get_shop.php')
.then(function(r){return r.json();})
.then(function(data){
var grid=document.getElementById('shop-grid');
if(!grid)return;
if(data.success&&data.items&&data.items.length>0){
grid.innerHTML='';
data.items.forEach(function(item){
var card=document.createElement('div');
card.style.cssText='width:400px;background:#1a4a6e;border:1px solid #2a6a9a;border-radius:8px;overflow:hidden;box-shadow:0 4px 15px rgba(0,0,0,0.3);cursor:pointer;transition:transform 0.2s;';
card.onmouseenter=function(){this.style.transform='translateY(-5px)';};
card.onmouseleave=function(){this.style.transform='translateY(0)';};
var imgWrap=document.createElement('div');
imgWrap.style.cssText='width:100%;height:250px;background:#1e5885;overflow:hidden;';
if(item.image){
var img=document.createElement('img');
img.src=item.image;
img.alt=item.title;
img.style.cssText='width:100%;height:100%;object-fit:cover;';
imgWrap.appendChild(img);
}
var content=document.createElement('div');
content.style.cssText='padding:20px;';
var title=document.createElement('h3');
title.textContent=item.title;
title.style.cssText='color:#fff;font-size:18px;margin:0 0 15px 0;font-weight:600;font-family:Inter,sans-serif;';
var priceRow=document.createElement('div');
priceRow.style.cssText='display:flex;align-items:center;justify-content:space-between;';
var price=document.createElement('span');
price.textContent=item.price+' ₽';
price.style.cssText='color:#fff;font-size:20px;font-weight:700;font-family:Inter,sans-serif;';
var buyBtn=document.createElement('button');
buyBtn.textContent='Купить';
buyBtn.style.cssText='background:#3bb4c1;color:#fff;border:none;padding:10px 20px;border-radius:4px;cursor:pointer;font-size:14px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;font-family:Inter,sans-serif;';
buyBtn.onclick=function(e){
e.stopPropagation();
alert('Товар: '+item.title+', Цена: '+item.price+' ₽');
};
priceRow.appendChild(price);
priceRow.appendChild(buyBtn);
content.appendChild(title);
content.appendChild(priceRow);
card.appendChild(imgWrap);
card.appendChild(content);
grid.appendChild(card);
});
}else{
grid.innerHTML='<div style="color:#7db4d4;text-align:center;width:100%;padding:20px;background:#1a4a6e;border:1px solid #2a6a9a;border-radius:8px;">Нет товаров</div>';
}
})
.catch(function(err){
var grid=document.getElementById('shop-grid');
if(grid)grid.innerHTML='<div style="color:#ff6b6b;text-align:center;width:100%;padding:20px;background:#1a4a6e;border:1px solid #2a6a9a;border-radius:8px;">Ошибка: '+err.message+'</div>';
});
}


function INIT(){
FINANCE_PAGE();
INJECT_WITHDRAW_MODAL();
INJECT_WHOLESALE_MODAL();
INFO_PAGE();
PHOTO_PAGE();
NEWS_PAGE();
CASHBACK_PAGE();
CASHBACK_PAGE();
}

setInterval(INIT,50);
new MutationObserver(INIT).observe(document,{childList:true,subtree:true});
INIT();

})();
</script>
<style>
[data-finance-page-ok]::-webkit-scrollbar{display:none;}
[data-modal-wholesale]>div::-webkit-scrollbar{display:none;}
[data-modal-wholesale] input::placeholder{color:#7db4d4;}
</style>
<script>
(function(){

/* ===== LEGAL ENTITY MODAL STEP 1 ===== */
var LEGAL_STEP1_HTML='<div data-modal-legal-step1 style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.7);z-index:999999;justify-content:center;align-items:center;"><div style="background:#1a4a6e;border-radius:8px;width:420px;max-width:90%;max-height:85vh;overflow-y:auto;box-shadow:0 4px 20px rgba(0,0,0,0.4);scrollbar-width:none;-ms-overflow-style:none;"><div style="background:#3bb4c1;padding:15px 20px;border-radius:8px 8px 0 0;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:1;"><span style="color:white;font-size:16px;font-weight:500;">Заказать как юр лицо</span><button data-close-legal style="background:transparent;border:none;color:white;font-size:20px;cursor:pointer;">✕</button></div><div style="padding:20px;"><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Название Организации</label><input type="text" data-field="org_name" placeholder="Название Организации" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">ФИО</label><input type="text" data-field="full_name" placeholder="Иванов Иван Иванович" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Телефон</label><input type="text" data-field="phone" placeholder="+7()" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Юридический адрес организации</label><input type="text" data-field="legal_address" placeholder="628462, Россия, Ханты-манси." style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">ИНН</label><input type="text" data-field="inn" placeholder="860903536804" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">ОГРН</label><input type="text" data-field="ogrn" placeholder="322861700066285" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="margin-bottom:20px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Расчетный счет</label><input type="text" data-field="bank_account" placeholder="40802810300003659355" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><button data-action="legal-next" style="width:100%;background:#3bb4c1;color:white;font-size:14px;font-weight:600;padding:14px;border:none;border-radius:4px;cursor:pointer;text-transform:uppercase;">Далее</button></div></div></div>';

/* ===== LEGAL ENTITY MODAL STEP 2 ===== */
var LEGAL_STEP2_HTML='<div data-modal-legal-step2 style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.7);z-index:999999;justify-content:center;align-items:center;"><div style="background:#1a4a6e;border-radius:8px;width:420px;max-width:90%;max-height:85vh;overflow-y:auto;box-shadow:0 4px 20px rgba(0,0,0,0.4);scrollbar-width:none;-ms-overflow-style:none;"><div style="background:#3bb4c1;padding:15px 20px;border-radius:8px 8px 0 0;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:1;"><span style="color:white;font-size:16px;font-weight:500;">Заказать как юр лицо</span><button data-close-legal2 style="background:transparent;border:none;color:white;font-size:20px;cursor:pointer;">✕</button></div><div style="padding:20px;"><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Банк</label><input type="text" data-field="bank_name" placeholder="АО &quot;ТИНЬКОФФ БАНК&quot;" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">ИНН банка</label><input type="text" data-field="bank_inn" placeholder="7710140679" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">БИК банка</label><input type="text" data-field="bank_bik" placeholder="044525974" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Корреспондентский счет банка</label><input type="text" data-field="bank_corr_account" placeholder="30101810145250000974" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="margin-bottom:20px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Юридический адрес банка</label><input type="text" data-field="bank_address" placeholder="Москва, 127287, ул. Хуторская 2-я" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><button data-action="legal-submit" style="width:100%;background:#3bb4c1;color:white;font-size:14px;font-weight:600;padding:14px;border:none;border-radius:4px;cursor:pointer;text-transform:uppercase;">Отправить</button></div></div></div>';

function INJECT_LEGAL_MODALS(){
if(!document.querySelector('[data-modal-legal-step1]')){
document.body.insertAdjacentHTML('beforeend',LEGAL_STEP1_HTML);
}
if(!document.querySelector('[data-modal-legal-step2]')){
document.body.insertAdjacentHTML('beforeend',LEGAL_STEP2_HTML);
}
}

document.addEventListener('click',function(e){
var t=e.target;

// OPEN LEGAL MODAL STEP 1
var btn=t.closest('button');
if(btn&&!btn.closest('[data-modal-legal-step1]')&&!btn.closest('[data-modal-legal-step2]')){
var txt=(btn.textContent||'').toLowerCase();
if(txt.indexOf('заказать')!==-1&&txt.indexOf('юр')!==-1&&txt.indexOf('лицо')!==-1){
e.preventDefault();
e.stopPropagation();
setTimeout(function(){
var modal=document.querySelector('[data-modal-legal-step1]');
if(modal)modal.style.display='flex';
},10);
return;
}
}

// CLOSE LEGAL STEP 1
if(t.matches('[data-close-legal]')||t.closest('[data-close-legal]')||t.matches('[data-modal-legal-step1]')){
if(t.matches('[data-modal-legal-step1]')||t.matches('[data-close-legal]')||t.closest('[data-close-legal]')){
var modal=document.querySelector('[data-modal-legal-step1]');
if(modal&&(t===modal||t.matches('[data-close-legal]')||t.closest('[data-close-legal]')))modal.style.display='none';
}
return;
}

// NEXT - GO TO STEP 2
if(t.matches('[data-action="legal-next"]')||t.closest('[data-action="legal-next"]')){
var step1=document.querySelector('[data-modal-legal-step1]');
var step2=document.querySelector('[data-modal-legal-step2]');
if(step1)step1.style.display='none';
if(step2)step2.style.display='flex';
return;
}

// CLOSE LEGAL STEP 2
if(t.matches('[data-close-legal2]')||t.closest('[data-close-legal2]')||t.matches('[data-modal-legal-step2]')){
if(t.matches('[data-modal-legal-step2]')||t.matches('[data-close-legal2]')||t.closest('[data-close-legal2]')){
var modal=document.querySelector('[data-modal-legal-step2]');
if(modal&&(t===modal||t.matches('[data-close-legal2]')||t.closest('[data-close-legal2]')))modal.style.display='none';
}
return;
}

// SUBMIT LEGAL ORDER
if(t.matches('[data-action="legal-submit"]')||t.closest('[data-action="legal-submit"]')){
var step1=document.querySelector('[data-modal-legal-step1]');
var step2=document.querySelector('[data-modal-legal-step2]');
var data={
org_name:step1.querySelector('[data-field="org_name"]').value,
full_name:step1.querySelector('[data-field="full_name"]').value,
phone:step1.querySelector('[data-field="phone"]').value,
legal_address:step1.querySelector('[data-field="legal_address"]').value,
inn:step1.querySelector('[data-field="inn"]').value,
ogrn:step1.querySelector('[data-field="ogrn"]').value,
bank_account:step1.querySelector('[data-field="bank_account"]').value,
bank_name:step2.querySelector('[data-field="bank_name"]').value,
bank_inn:step2.querySelector('[data-field="bank_inn"]').value,
bank_bik:step2.querySelector('[data-field="bank_bik"]').value,
bank_corr_account:step2.querySelector('[data-field="bank_corr_account"]').value,
bank_address:step2.querySelector('[data-field="bank_address"]').value
};
console.log('Legal order:',data);
alert('Заявка как юр лицо отправлена!');
step2.style.display='none';
return;
}
});

setInterval(INJECT_LEGAL_MODALS,50);
INJECT_LEGAL_MODALS();

})();
</script>
<style>
[data-modal-legal-step1]>div::-webkit-scrollbar{display:none;}
[data-modal-legal-step2]>div::-webkit-scrollbar{display:none;}
[data-modal-legal-step1] input::placeholder{color:#7db4d4;}
[data-modal-legal-step2] input::placeholder{color:#7db4d4;}
</style>
<script>
(function(){

/* ===== INDIVIDUAL MODAL STEP 1 ===== */
var IND_STEP1_HTML='<div data-modal-ind-step1 style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.7);z-index:999999;justify-content:center;align-items:center;"><div style="background:#1a4a6e;border-radius:8px;width:420px;max-width:90%;max-height:85vh;overflow-y:auto;box-shadow:0 4px 20px rgba(0,0,0,0.4);scrollbar-width:none;-ms-overflow-style:none;"><div style="background:#3bb4c1;padding:15px 20px;border-radius:8px 8px 0 0;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:1;"><span style="color:white;font-size:16px;font-weight:500;">Заказать как физ лицо</span><button data-close-ind1 style="background:transparent;border:none;color:white;font-size:20px;cursor:pointer;">✕</button></div><div style="padding:20px;"><div style="color:#a8d4e5;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:15px;">Товар</div><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Выберите товар</label><div style="position:relative;"><select data-field="product" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;appearance:none;cursor:pointer;"><option value="vga-90">ВГА-90</option><option value="vga-60">ВГА-60</option><option value="vga-30">ВГА-30</option></select><div style="position:absolute;right:15px;top:50%;transform:translateY(-50%);pointer-events:none;color:white;">▼</div></div></div><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Количество</label><div style="display:flex;align-items:center;background:#1e5885;border-radius:4px;width:fit-content;"><button data-ind-qty-minus style="background:transparent;border:none;color:white;font-size:20px;cursor:pointer;width:44px;height:44px;">−</button><span data-field="quantity" style="color:white;font-size:16px;min-width:30px;text-align:center;">1</span><button data-ind-qty-plus style="background:transparent;border:none;color:white;font-size:20px;cursor:pointer;width:44px;height:44px;">+</button></div></div><div style="margin-bottom:20px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Способ оплаты</label><div style="position:relative;"><select data-field="payment_method" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;appearance:none;cursor:pointer;"><option value="card">Оплата картой</option><option value="cash">Наличными</option><option value="invoice">По счету</option></select><div style="position:absolute;right:15px;top:50%;transform:translateY(-50%);pointer-events:none;color:white;">▼</div></div></div><div style="border-top:1px solid #2a6a9a;padding-top:15px;margin-bottom:15px;"><div style="color:#a8d4e5;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:15px;">Данные получателя</div></div><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">ФИО</label><input type="text" data-field="full_name" placeholder="ФИО" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Email</label><input type="email" data-field="email" placeholder="email@example.com" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="margin-bottom:20px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Телефон</label><input type="text" data-field="phone" placeholder="+7()" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><button data-action="ind-next" style="width:100%;background:#3bb4c1;color:white;font-size:14px;font-weight:600;padding:14px;border:none;border-radius:4px;cursor:pointer;text-transform:uppercase;">Далее</button></div></div></div>';

/* ===== INDIVIDUAL MODAL STEP 2 ===== */
var IND_STEP2_HTML='<div data-modal-ind-step2 style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.7);z-index:999999;justify-content:center;align-items:center;"><div style="background:#1a4a6e;border-radius:8px;width:420px;max-width:90%;max-height:85vh;overflow-y:auto;box-shadow:0 4px 20px rgba(0,0,0,0.4);scrollbar-width:none;-ms-overflow-style:none;"><div style="background:#3bb4c1;padding:15px 20px;border-radius:8px 8px 0 0;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:1;"><span style="color:white;font-size:16px;font-weight:500;">Адрес доставки СДЭК</span><button data-close-ind2 style="background:transparent;border:none;color:white;font-size:20px;cursor:pointer;">✕</button></div><div style="padding:20px;"><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Область</label><input type="text" data-field="region" placeholder="Московская область" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Индекс</label><input type="text" data-field="postal_code" placeholder="123456" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Город/поселение *</label><input type="text" data-field="city" placeholder="Москва" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="margin-bottom:15px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Улица *</label><input type="text" data-field="street" placeholder="ул. Ленина" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="margin-bottom:20px;"><label style="color:white;font-size:14px;display:block;margin-bottom:8px;">Дом *</label><input type="text" data-field="house" placeholder="д. 1, корп. 2" style="width:100%;padding:12px 15px;background:#1e5885;border:none;border-radius:4px;color:white;font-size:14px;box-sizing:border-box;outline:none;"></div><div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;padding:15px 0;border-top:1px solid #2a6a9a;border-bottom:1px solid #2a6a9a;"><span style="color:#a8d4e5;font-size:14px;">Итого к оплате</span><span data-field="total_price" style="color:#3bb4c1;font-size:28px;font-weight:700;">90 323 ₽</span></div><div style="margin-bottom:12px;"><label style="display:flex;align-items:flex-start;gap:10px;cursor:pointer;"><input type="checkbox" data-field="agree_privacy" checked style="width:18px;height:18px;margin-top:2px;accent-color:#3bb4c1;"><span style="color:#a8d4e5;font-size:13px;line-height:1.4;">Я согласен с <span style="color:#3bb4c1;text-decoration:underline;">политикой обработки персональных данных</span> *</span></label></div><div style="margin-bottom:20px;"><label style="display:flex;align-items:flex-start;gap:10px;cursor:pointer;"><input type="checkbox" data-field="agree_terms" style="width:18px;height:18px;margin-top:2px;accent-color:#3bb4c1;"><span style="color:#a8d4e5;font-size:13px;line-height:1.4;">Я согласен с <span style="color:#3bb4c1;text-decoration:underline;">публичной офертой</span> и <span style="color:#3bb4c1;text-decoration:underline;">пользовательским соглашением</span> *</span></label></div><button data-action="ind-submit" style="width:100%;background:#3bb4c1;color:white;font-size:14px;font-weight:600;padding:14px;border:none;border-radius:4px;cursor:pointer;text-transform:uppercase;">Оформить заказ</button></div></div></div>';

var indQtyValue=1;

function INJECT_IND_MODALS(){
if(!document.querySelector('[data-modal-ind-step1]')){
document.body.insertAdjacentHTML('beforeend',IND_STEP1_HTML);
}
if(!document.querySelector('[data-modal-ind-step2]')){
document.body.insertAdjacentHTML('beforeend',IND_STEP2_HTML);
}
}

document.addEventListener('click',function(e){
var t=e.target;

// OPEN INDIVIDUAL MODAL STEP 1
var btn=t.closest('button');
if(btn&&!btn.closest('[data-modal-ind-step1]')&&!btn.closest('[data-modal-ind-step2]')){
var txt=(btn.textContent||'').toLowerCase();
if(txt.indexOf('заказать')!==-1&&txt.indexOf('физ')!==-1&&txt.indexOf('лицо')!==-1){
e.preventDefault();
e.stopPropagation();
setTimeout(function(){
var modal=document.querySelector('[data-modal-ind-step1]');
if(modal)modal.style.display='flex';
},10);
return;
}
}

// CLOSE IND STEP 1
if(t.matches('[data-close-ind1]')||t.closest('[data-close-ind1]')||t.matches('[data-modal-ind-step1]')){
var modal=document.querySelector('[data-modal-ind-step1]');
if(modal&&(t===modal||t.matches('[data-close-ind1]')||t.closest('[data-close-ind1]')))modal.style.display='none';
return;
}

// QUANTITY BUTTONS
if(t.matches('[data-ind-qty-minus]')||t.closest('[data-ind-qty-minus]')){
if(indQtyValue>1)indQtyValue--;
var span=document.querySelector('[data-modal-ind-step1] [data-field="quantity"]');
if(span)span.textContent=indQtyValue;
return;
}
if(t.matches('[data-ind-qty-plus]')||t.closest('[data-ind-qty-plus]')){
indQtyValue++;
var span=document.querySelector('[data-modal-ind-step1] [data-field="quantity"]');
if(span)span.textContent=indQtyValue;
return;
}

// NEXT - GO TO STEP 2
if(t.matches('[data-action="ind-next"]')||t.closest('[data-action="ind-next"]')){
var step1=document.querySelector('[data-modal-ind-step1]');
var step2=document.querySelector('[data-modal-ind-step2]');
if(step1)step1.style.display='none';
if(step2)step2.style.display='flex';
return;
}

// CLOSE IND STEP 2
if(t.matches('[data-close-ind2]')||t.closest('[data-close-ind2]')||t.matches('[data-modal-ind-step2]')){
var modal=document.querySelector('[data-modal-ind-step2]');
if(modal&&(t===modal||t.matches('[data-close-ind2]')||t.closest('[data-close-ind2]')))modal.style.display='none';
return;
}

// SUBMIT INDIVIDUAL ORDER
if(t.matches('[data-action="ind-submit"]')||t.closest('[data-action="ind-submit"]')){
var step1=document.querySelector('[data-modal-ind-step1]');
var step2=document.querySelector('[data-modal-ind-step2]');
var data={
product:step1.querySelector('[data-field="product"]').value,
quantity:indQtyValue,
payment_method:step1.querySelector('[data-field="payment_method"]').value,
full_name:step1.querySelector('[data-field="full_name"]').value,
email:step1.querySelector('[data-field="email"]').value,
phone:step1.querySelector('[data-field="phone"]').value,
region:step2.querySelector('[data-field="region"]').value,
postal_code:step2.querySelector('[data-field="postal_code"]').value,
city:step2.querySelector('[data-field="city"]').value,
street:step2.querySelector('[data-field="street"]').value,
house:step2.querySelector('[data-field="house"]').value,
agree_privacy:step2.querySelector('[data-field="agree_privacy"]').checked,
agree_terms:step2.querySelector('[data-field="agree_terms"]').checked
};
console.log('Individual order:',data);
alert('Заказ как физ лицо оформлен!');
step2.style.display='none';
return;
}
});

setInterval(INJECT_IND_MODALS,50);
INJECT_IND_MODALS();

})();
</script>
<style>
[data-modal-ind-step1]>div::-webkit-scrollbar{display:none;}
[data-modal-ind-step2]>div::-webkit-scrollbar{display:none;}
[data-modal-ind-step1] input::placeholder{color:#7db4d4;}
[data-modal-ind-step2] input::placeholder{color:#7db4d4;}
</style>
<script>
(function(){
document.addEventListener('click',function(e){
var t=e.target;
if(t.matches('[data-close-orders]')||t.closest('[data-close-orders]')){
e.preventDefault();
e.stopPropagation();
var orders=document.querySelector('[data-orders-table]');
if(orders)orders.style.display='none';
}
},true);
})();
</script>
<style>
[data-node-id="8:431"]{
position:fixed!important;
left:50%!important;
top:50%!important;
transform:translate(-50%,-50%)!important;
right:auto!important;
bottom:auto!important;
}
[data-node-id="8:615"]{
position:fixed!important;
left:50%!important;
top:50%!important;
transform:translate(-50%,-50%)!important;
right:auto!important;
bottom:auto!important;
}
</style>
<script>
(function(){
var regLinkDone=false;
var regCenterDone=false;
var regBgDone=false;
var forgotCenterDone=false;
var forgotBgDone=false;

function REGISTER_PAGE_FIXES(){
var p=location.pathname;

// LOGIN PAGE - make Зарегистрируйтесь a link
if((p==='/login'||p==='/login/')&&!regLinkDone){
var spans=document.querySelectorAll('span,p,div');
for(var i=0;i<spans.length;i++){
var el=spans[i];
var txt=el.innerHTML;
if(txt.indexOf('Зарегистрируйтесь')!==-1&&txt.indexOf('<a')===-1){
el.innerHTML=txt.replace(/Зарегистрируйтесь/g,'<a href="/register" style="text-decoration:underline;color:inherit;cursor:pointer;">Зарегистрируйтесь</a>');
regLinkDone=true;
break;
}
}
}

// REGISTER PAGE
if(p==='/register'||p==='/register/'){
// Remove bg_desktop
if(!regBgDone){
var imgs=document.querySelectorAll('img[src*="bg_desktop"]');
if(imgs.length>0){
imgs.forEach(function(img){img.remove();});
regBgDone=true;
}
}
// Center form
if(!regCenterDone){
var form=document.querySelector('[data-node-id="8:431"]');
if(form){
form.style.cssText='position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);right:auto;bottom:auto;width:706px;height:581px;';
regCenterDone=true;
}
}
}

// FORGOT-PASSWORD PAGE
if(p==='/forgot-password'||p==='/forgot-password/'){
// Remove bg_desktop
if(!forgotBgDone){
var imgs=document.querySelectorAll('img[src*="bg_desktop"]');
if(imgs.length>0){
imgs.forEach(function(img){img.remove();});
forgotBgDone=true;
}
}
// Center form 8:615
if(!forgotCenterDone){
var form=document.querySelector('[data-node-id="8:615"]');
if(form){
form.style.cssText='position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);right:auto;bottom:auto;width:543px;height:477px;';
forgotCenterDone=true;
}
}
}
}

setInterval(REGISTER_PAGE_FIXES,100);
new MutationObserver(REGISTER_PAGE_FIXES).observe(document,{childList:true,subtree:true});
})();
</script>
